<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Iván Arribas (Depto. Análisis Económico. Universitat de València)" />


<title>Pernoctaciones en alojamientos turísticos de turistas extranjeros</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Predicción con Datos Temporales</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="01-Guia-curso.html">
    <span class="fa fa-graduation-cap"></span>
     
    Guía del curso
  </a>
</li>
<li>
  <a href="02-Logistica.html">
    <span class="fa fa-laptop"></span>
     
    Logística
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-book"></span>
     
    Diapos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Teoría</li>
    <li>
      <a href="03-01-Tema1.html">Tema 1: Introducción</a>
    </li>
    <li>
      <a href="03-02-Tema2.html">Tema 2: Definición</a>
    </li>
    <li>
      <a href="03-03-Tema3.html">Tema 3: Métodos sencillos</a>
    </li>
    <li>
      <a href="03-04-Tema4.html">Tema 4: Media móvil</a>
    </li>
    <li>
      <a href="03-05-Tema5.html">Tema 5: Alisado</a>
    </li>
    <li>
      <a href="03-06-Tema6.html">Tema 6: ARIMA</a>
    </li>
    <li>
      <a href="03-07-Tema7.html">Tema 7: SARIMA</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Ejemplo de aplicación</li>
    <li>
      <a href="03-08-Ejemplo2.html">Ejemplo Tema 2</a>
    </li>
    <li>
      <a href="03-09-Ejemplo3.html">Ejemplo Tema 3</a>
    </li>
    <li>
      <a href="03-10-Ejemplo4.html">Ejemplo Tema 4</a>
    </li>
    <li>
      <a href="03-11-Ejemplo5.html">Ejemplo Tema 5</a>
    </li>
    <li>
      <a href="03-12-Ejemplo6.html">Ejemplo Tema 6</a>
    </li>
    <li>
      <a href="03-13-Ejemplo7.html">Ejemplo Tema 7</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Otro ejemplo</li>
    <li>
      <a href="03-14-Ejemplo-Pasajeros.html">Ejemplo de Pasajeros</a>
    </li>
  </ul>
</li>
<li>
  <a href="04-Recursos-R.html">
    <span class="fa fa-code"></span>
     
    Recursos de R
  </a>
</li>
<li>
  <a href="05-Evaluacion_Continua.html">
    <span class="fa fa-edit"></span>
     
    Evaluacion Continua
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-download"></span>
     
    Más
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">R</li>
    <li>
      <a href="https://cran.r-project.org">Dónde está R</a>
    </li>
    <li>
      <a href="https://rstudio.com">Donde está RStudio</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Markdown</li>
    <li>
      <a href="https://bookdown.org/yihui/rmarkdown/">Markdown</a>
    </li>
    <li>
      <a href="https://rmarkdown.rstudio.com/lesson-1.html">R Markdown</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Otros</li>
    <li>
      <a href="https://www.r-bloggers.com">Blog sobre R</a>
    </li>
    <li>
      <a href="https://bookdown.org">Libros online que debes conocer</a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Pernoctaciones en alojamientos turísticos de turistas extranjeros</h1>
<h3 class="subtitle">Alisado exponencial</h3>
<h4 class="author">Iván Arribas (Depto. Análisis Económico. Universitat de València)</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#introducción"><span class="toc-section-number">1</span> Introducción</a></li>
<li><a href="#ajuste-por-alisado-exponencial-de-las-pernoctaciones-anuales"><span class="toc-section-number">2</span> Ajuste por alisado exponencial de las Pernoctaciones anuales</a></li>
<li><a href="#pernoctaciones-mensuales"><span class="toc-section-number">3</span> Pernoctaciones mensuales</a><ul>
<li><a href="#ajuste-por-alisado-exponencial"><span class="toc-section-number">3.1</span> Ajuste por alisado exponencial</a></li>
<li><a href="#predicción"><span class="toc-section-number">3.2</span> Predicción</a></li>
<li><a href="#análisis-del-error"><span class="toc-section-number">3.3</span> Análisis del error</a></li>
<li><a href="#validación"><span class="toc-section-number">3.4</span> Validación</a></li>
</ul></li>
<li><a href="#modelos-alternativos"><span class="toc-section-number">4</span> Modelos alternativos</a></li>
</ul>
</div>

<p><br />
<br />
</p>
<div id="introducción" class="section level1">
<h1><span class="header-section-number">1</span> Introducción</h1>
<p>Consideremos de nuevo la serie temporal correspondiente al número de pernoctaciones que los turistas extranjeros realizan en España en alojamientos turísticos autorizados (que llamaremos Pernoctaciones en adelante). Esta serie está disponible en Eurostat desde enero de 2000 hasta diciembre de 2019, un total de 20 años y 240 observaciones.</p>
<p>La serie presenta tendencia decreciente hasta finales de la primera década del presente siglo y luego creciente hasta los dos últimos años. La estacionalidad de orden 12 esta determinada por las vacaciones de verano. El esquema es multiplicativo.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">Pernoctaciones &lt;-<span class="st"> </span><span class="kw">read.csv2</span>(<span class="st">&quot;./series/Pernoctaciones.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">Pernoctaciones &lt;-<span class="st"> </span><span class="kw">ts</span>(Pernoctaciones[,<span class="dv">2</span>], <span class="dt">start =</span> <span class="dv">2000</span>, <span class="dt">frequency =</span> <span class="dv">12</span>)</a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">autoplot</span>(Pernoctaciones<span class="op">/</span><span class="dv">1000000</span>,</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">         <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">         <span class="dt">ylab =</span> <span class="st">&quot;Noches (millones)&quot;</span>,</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">         <span class="dt">main =</span> <span class="st">&quot;Figura 1. Pernoctaciones (datos mensuales)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks=</span> <span class="kw">seq</span>(<span class="dv">2000</span>, <span class="dv">2020</span>, <span class="dv">2</span>))  </a></code></pre></div>
<p><img src="03-11-Ejemplo5_files/figure-html/unnamed-chunk-2-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>La serie de Pernoctaciones anualizada (y en millones de noches) sería</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">PernoctacionesAnual =<span class="st"> </span><span class="kw">aggregate</span>(Pernoctaciones<span class="op">/</span><span class="dv">1000000</span>, <span class="dt">FUN =</span> sum)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw">autoplot</span>(PernoctacionesAnual,</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">         <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">         <span class="dt">ylab =</span> <span class="st">&quot;Noches (millones)&quot;</span>,</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">         <span class="dt">main =</span> <span class="st">&quot;Figura 2. Pernoctaciones&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks=</span> <span class="kw">seq</span>(<span class="dv">2000</span>, <span class="dv">2020</span>, <span class="dv">2</span>)) </a></code></pre></div>
<p><img src="03-11-Ejemplo5_files/figure-html/unnamed-chunk-3-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p><br />
<br />
</p>
</div>
<div id="ajuste-por-alisado-exponencial-de-las-pernoctaciones-anuales" class="section level1">
<h1><span class="header-section-number">2</span> Ajuste por alisado exponencial de las Pernoctaciones anuales</h1>
<p>Vamos a aplicar la metodología de alisado exponencial a la serie de pernoctaciones anuales.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">PernoctacionesAnualEts &lt;-<span class="st"> </span><span class="kw">ets</span>(PernoctacionesAnual, <span class="dt">model =</span> <span class="st">&quot;ZZZ&quot;</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">summary</span>(PernoctacionesAnualEts) </a></code></pre></div>
<pre><code>ETS(A,N,N) 

Call:
 ets(y = PernoctacionesAnual, model = &quot;ZZZ&quot;) 

  Smoothing parameters:
    alpha = 0.9999 

  Initial states:
    l = 90.1324 

  sigma:  3.9344

     AIC     AICc      BIC 
118.5975 120.0975 121.5847 

Training set error measures:
                     ME     RMSE      MAE       MPE     MAPE     MASE      ACF1
Training set -0.7213941 3.732477 3.024684 -1.012994 4.230428 0.950078 0.4149539</code></pre>
<p>Si se estima el modelo sin imponer ninguna restricción, <code>ets</code> identifica como modelo óptimo ETS(A,N,N) donde el parámetro <span class="math inline">\(\alpha\)</span> es igual a 1. Es decir, el mejor modelo de alisado corresponde al método ingenuo I con error aditivo: <span class="math inline">\(y_{t+1} = y_t + \varepsilon_{t+1}\)</span>, visto ya en el ejemplo del tema 3. El error porcentual cometido (4.2%) es similar al estimado para el método ingenuo I (4.4%). La diferencia se debe a que <span class="math inline">\(\alpha\)</span> no es exactamente 1.</p>
<p>Para la serie anual, aunque hemos ampliado el menú de métodos, no hemos encontrado ningún método mejor que el más sencillo: predecir repitiendo la última observación.</p>
<p><br />
<br />
</p>
</div>
<div id="pernoctaciones-mensuales" class="section level1">
<h1><span class="header-section-number">3</span> Pernoctaciones mensuales</h1>
<p>Vamos ahora a aplicar la metodología de alisado exponencial a la serie mensual de pernoctaciones.</p>
<p><br />
</p>
<div id="ajuste-por-alisado-exponencial" class="section level2">
<h2><span class="header-section-number">3.1</span> Ajuste por alisado exponencial</h2>
<p>Si se estima el modelo sin imponer ninguna restricción, <code>ets</code> identifica como modelo óptimo ETS(M,Ad,M).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">PernoctacionesEts &lt;-<span class="st"> </span><span class="kw">ets</span>(Pernoctaciones, <span class="dt">model =</span> <span class="st">&quot;ZZZ&quot;</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">summary</span>(PernoctacionesEts) </a></code></pre></div>
<pre><code>ETS(M,Ad,M) 

Call:
 ets(y = Pernoctaciones, model = &quot;ZZZ&quot;) 

  Smoothing parameters:
    alpha = 0.2513 
    beta  = 0.0113 
    gamma = 0.5525 
    phi   = 0.9353 

  Initial states:
    l = 7808552.8527 
    b = -4031.1697 
    s = 0.679 0.6999 0.9942 1.161 1.8271 1.7792
           1.1054 0.864 0.7568 0.751 0.6827 0.6997

  sigma:  0.0433

     AIC     AICc      BIC 
7294.190 7297.285 7356.842 

Training set error measures:
                    ME     RMSE      MAE        MPE    MAPE      MASE      ACF1
Training set -16711.24 252133.4 190455.8 -0.3225669 3.20705 0.6175896 0.2290653</code></pre>
<p>El modelo estimado tiene pendiente aditiva con amortiguamiento, estacionalidad multiplicativa y residuo multiplicativo: <span class="math display">\[y_{t+1} = (l_t + \phi b_t) \cdot s_{t+1-m} \cdot (1 + \varepsilon_{t+1}).\]</span></p>
<p>El valor de <span class="math inline">\(\alpha\)</span> indica que el nivel de la serie ha ido variando lentamente en el tiempo. El valor de <span class="math inline">\(\beta\)</span> es prácticamente nulo, por lo que la pendiente se mantiene sin cambios durante el periodo de análisis. El valor de <span class="math inline">\(\gamma\)</span> tan elevado indica que la componente estacional ha evolucionado con el paso de los años. Por último, <span class="math inline">\(\phi\)</span> toma un valor relativamente bajo así que debemos aceptar que incluir amortiguamiento en el modelo mejora su ajuste a la serie. (Véase figura 3.)</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">autoplot</span>(PernoctacionesEts,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">         <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">         <span class="dt">main =</span> <span class="st">&quot;Figura 3. Descomposición para Pernoctaciones&quot;</span>)</a></code></pre></div>
<p><img src="03-11-Ejemplo5_files/figure-html/unnamed-chunk-6-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>La calidad del ajuste es bastante buena, con un MAPE de 3.2% y un RMSE de 252 mil pernoctaciones (o 190 si usamos el MAE). Además, según el MASE, el modelo de alisado exponencial supone una mejora del 38% respecto del método ingenuo con estacionalidad, que ya usamos para Pernoctaciones y tenía un MAPE del 5.3%. Parece que para la serie mensual el método de Alisado si supone una mejora notable en la calidad del ajuste respecto del método más sencillo.</p>
<p>Los últimos valores estimados del nivel y la estacionalidad, que corresponden a diciembre de 2019, nos permiten mostrar gráficamente la componente estacional más reciente (figura 4).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">TT &lt;-<span class="st"> </span><span class="kw">nrow</span>(PernoctacionesEts<span class="op">$</span>states)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">PernoctacionesEts<span class="op">$</span>states[TT,]</a></code></pre></div>
<pre><code>         l          b         s1         s2         s3         s4         s5 
6438187.38   -2370.33       0.63       0.64       0.93       1.18       1.83 
        s6         s7         s8         s9        s10        s11        s12 
      1.64       1.14       0.93       0.77       0.74       0.67       0.66 </code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">componenteEstacional &lt;-<span class="st"> </span>PernoctacionesEts<span class="op">$</span>states[TT, <span class="dv">14</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dt">y =</span> componenteEstacional)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">1</span>, <span class="dt">colour =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">lty =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Figura 4. Componente estacional&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Efecto estacional&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks=</span> <span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, </a>
<a class="sourceLine" id="cb11-10" data-line-number="10">                     <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Ene&quot;</span>, <span class="st">&quot;Feb&quot;</span>, <span class="st">&quot;Mar&quot;</span>, <span class="st">&quot;Abr&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jun&quot;</span>, </a>
<a class="sourceLine" id="cb11-11" data-line-number="11">                                <span class="st">&quot;Jul&quot;</span>, <span class="st">&quot;Ago&quot;</span>, <span class="st">&quot;Sep&quot;</span>, <span class="st">&quot;Oct&quot;</span>, <span class="st">&quot;Nov&quot;</span>, <span class="st">&quot;Dic&quot;</span>)) </a></code></pre></div>
<p><img src="03-11-Ejemplo5_files/figure-html/unnamed-chunk-9-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>El nivel de las pernoctaciones en diciembre de 2019 (última observación) es de 6.4 millones de noches y la pendiente -2,370.33 noches, prácticamente nula (en comparación con el nivel). El mayor número de pernoctaciones tiene lugar en verano, en los meses de julio y agosto. En concreto, destaca el mes agosto con un incremento del 83% (<code>s5</code>) en las pernoctaciones respecto de la media anual. Las pernoctaciones en invierno bajan drásticamente respecto de la media anual, observándose en diciembre un 37% menos de pernoctaciones (<code>s1</code>). El efecto estacional estimado por el método de alisado es muy similar al estimado durante la descriptiva de la serie.</p>
<p><br />
</p>
</div>
<div id="predicción" class="section level2">
<h2><span class="header-section-number">3.2</span> Predicción</h2>
<p>Si pedimos los valores de predicción y su intervalo de confianza al 95% para los próximos tres años tenemos (numéricamente sólo se muestra el primer año):</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">PernoctacionesEtsPre &lt;-<span class="st"> </span><span class="kw">forecast</span>(PernoctacionesEts, <span class="dt">h =</span> <span class="dv">36</span>, <span class="dt">level =</span> <span class="dv">95</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">PernoctacionesEtsPre</a></code></pre></div>
<pre><code>         Point Forecast    Lo 95    Hi 95
Jan 2020        4266613  3904628  4628597
Feb 2020        4281182  3905615  4656749
Mar 2020        4784850  4350648  5219052
Apr 2020        4918954  4457152  5380757
May 2020        5945740  5368299  6523181
Jun 2020        7305364  6571633  8039094
Jul 2020       10520934  9428609 11613258
Aug 2020       11752010 10491427 13012594
Sep 2020        7576075  6737027  8415124
Oct 2020        5999382  5313852  6684912
Nov 2020        4128750  3642353  4615147
Dec 2020        4074723  3580202  4569245</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">autoplot</span>(PernoctacionesEtsPre,</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">         <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">         <span class="dt">ylab =</span> <span class="st">&quot;Casos&quot;</span>,</a>
<a class="sourceLine" id="cb14-4" data-line-number="4">         <span class="dt">main =</span> <span class="st">&quot;Figura 5. Pernoctaciones (2000-2019) y predicción (2020-2022)&quot;</span>,</a>
<a class="sourceLine" id="cb14-5" data-line-number="5">         <span class="dt">PI =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="03-11-Ejemplo5_files/figure-html/unnamed-chunk-12-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Las predicciones muestran una suave tendencia decreciente. (Véase figura 5.)</p>
<p><br />
</p>
</div>
<div id="análisis-del-error" class="section level2">
<h2><span class="header-section-number">3.3</span> Análisis del error</h2>
<p>La figura 6 muestra el residuo del modelo, estimado aditivamente.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">error &lt;-<span class="st"> </span><span class="kw">residuals</span>(PernoctacionesEts, <span class="dt">type =</span> <span class="st">&quot;response&quot;</span>)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">sderror &lt;-<span class="st"> </span><span class="kw">sd</span>(error)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw">autoplot</span>(error,</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">         <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">         <span class="dt">ylab =</span> <span class="st">&quot;Error&quot;</span>,</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">         <span class="dt">main =</span> <span class="st">&quot;Figura 6. Error + Intervención&quot;,</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="st">         colour = &quot;</span>black<span class="st">&quot;) +</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="st">  geom_hline(yintercept = c(-3, -2, 2 ,3)*sderror, </span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="st">             colour = c(&quot;</span>red<span class="st">&quot;, &quot;</span>blue<span class="st">&quot;, &quot;</span>blue<span class="st">&quot;, &quot;</span>red<span class="st">&quot;), lty = 2) + </span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="st">  scale_x_continuous(breaks= seq(2000, 2020, 2)) </span></a></code></pre></div>
<p><img src="03-11-Ejemplo5_files/figure-html/unnamed-chunk-13-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Se aprecian dos meses, agosto de 2002 y julio de 2014 en los que el residuo supera las tres desviaciones típicas. Además, otros residuos cercanos a las tres desviaciones típicas son susceptibles de ser considerados intervención: agosto de 2001, abril de 2002 y agosto de 2017. Observa que todos las intervenciones caen en meses vacacionales y cuatro de ellas en verano.</p>
<p><br />
</p>
</div>
<div id="validación" class="section level2">
<h2><span class="header-section-number">3.4</span> Validación</h2>
<p>Ya hemos visto que el modelo comete un error próximo al 3.2%. Este valor es la estimación del <em>error en la previsión intra-muestral y a un periodo vista</em>. A fin de poder estimar mejor la capacidad predictiva del modelo vamos a estimar <em>el error de previsión extra-muestral según el horizonte temporal</em>.</p>
<p>Asumimos que se precisan diez años para hacer una buena estimación, <span class="math inline">\(k=120\)</span>, y que el horizonte temporal es un año, <span class="math inline">\(h = 12\)</span> meses.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">k &lt;-<span class="st"> </span><span class="dv">120</span>                 <span class="co">#Minimo numero de datos para estimar</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">h &lt;-<span class="st"> </span><span class="dv">12</span>                  <span class="co">#Horizonte de las predicicones</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3">TT &lt;-<span class="st"> </span><span class="kw">length</span>(Pernoctaciones)  <span class="co">#Longitud serie</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4">s &lt;-<span class="st"> </span>TT <span class="op">-</span><span class="st"> </span>k <span class="op">-</span><span class="st"> </span>h          <span class="co">#Total de estimaciones</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"></a>
<a class="sourceLine" id="cb16-6" data-line-number="6">mapeAlisado &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, s <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, h)</a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">0</span><span class="op">:</span>s) {</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">  train.set &lt;-<span class="st"> </span><span class="kw">subset</span>(Pernoctaciones, <span class="dt">start =</span> i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">end =</span> i <span class="op">+</span><span class="st"> </span>k)</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">  test.set &lt;-<span class="st">  </span><span class="kw">subset</span>(Pernoctaciones, <span class="dt">start =</span> i <span class="op">+</span><span class="st"> </span>k <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">end =</span> i <span class="op">+</span><span class="st"> </span>k <span class="op">+</span><span class="st"> </span>h)</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">  </a>
<a class="sourceLine" id="cb16-11" data-line-number="11">  fit &lt;-<span class="st"> </span><span class="kw">ets</span>(train.set, <span class="dt">model =</span> <span class="st">&quot;MAM&quot;</span>, <span class="dt">damped =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">  fcast&lt;-<span class="kw">forecast</span>(fit, <span class="dt">h =</span> h)</a>
<a class="sourceLine" id="cb16-13" data-line-number="13">  mapeAlisado[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>,] &lt;-<span class="st"> </span><span class="dv">100</span><span class="op">*</span><span class="kw">abs</span>(test.set <span class="op">-</span><span class="st"> </span>fcast<span class="op">$</span>mean)<span class="op">/</span>test.set</a>
<a class="sourceLine" id="cb16-14" data-line-number="14">}</a>
<a class="sourceLine" id="cb16-15" data-line-number="15"></a>
<a class="sourceLine" id="cb16-16" data-line-number="16">errorAlisado &lt;-<span class="st"> </span><span class="kw">colMeans</span>(mapeAlisado)</a>
<a class="sourceLine" id="cb16-17" data-line-number="17">errorAlisado</a></code></pre></div>
<pre><code> [1] 3.827112 4.913945 5.185219 4.996830 5.173516 5.411358 5.652740 5.724735
 [9] 5.750523 5.338688 5.012106 5.012112</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dt">y =</span> errorAlisado)) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Figura 7. Error de predicción según horizonte temporal&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Horizonte temporal de predicción&quot;) +</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="st">  ylab(&quot;</span>MAPE<span class="st">&quot;) +</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="st">  scale_x_continuous(breaks= 1:12)</span></a></code></pre></div>
<p><img src="03-11-Ejemplo5_files/figure-html/unnamed-chunk-14-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>La figura 7 muestra el error de previsión extra-muestral según el horizonte de previsión. Se observa como para horizontes de predicción de uno a nueve meses el error de predicción aumenta según aumenta el horizonte de predicción, pasando del 3.8% para predicciones a un mes vista hasta el 5.8% para predicciones a nueve meses vista.</p>
<p>Sin embargo, para previsiones a más largo plazo el error de predicción decrece, hasta situarse en el 5% en las previsiones a un año vista. Sorprendentemente, a un año vista se produce un salto en el error, que alcanza el 6.7%.</p>
<p><br />
<br />
</p>
</div>
</div>
<div id="modelos-alternativos" class="section level1">
<h1><span class="header-section-number">4</span> Modelos alternativos</h1>
<p>¿Podemos reducir el error extra-muestral de previsión si cambiamos las opciones por defecto de <code>ets</code> o la serie a analizar? Por ejemplo, ¿mejoramos si aplicamos el método de alisado sobre el logaritmo de la serie o usamos el criterio de minimizar el error de las previsiones a dos meses vista, o trabajamos con las pernoctaciones por día?</p>
<p>La figura 8 muestra el error de previsión extra-muestral según el horizonte de previsión para los siguientes modelos (todos con amortiguamiento):</p>
<table>
<colgroup>
<col width="13%" />
<col width="31%" />
<col width="18%" />
<col width="36%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"><strong>Id</strong></th>
<th align="left"><strong>Transformación</strong></th>
<th align="left"><strong>Modelo</strong></th>
<th align="left"><strong>Método estimación</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">Ninguna</td>
<td align="left">MAdM</td>
<td align="left">Máxima verosimilitud</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">Ninguna</td>
<td align="left">MAdM</td>
<td align="left">Mínimo error en previsiones a 2 periodos vista</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">Logaritmo</td>
<td align="left">AAdA</td>
<td align="left">Máxima verosimilitud</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="left">Logartimo</td>
<td align="left">AAdA</td>
<td align="left">Mínimo error en previsiones a 2 periodos vista</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="left">Pernoctaciones por día</td>
<td align="left">MAdM</td>
<td align="left">Máxima verosimilitud</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="left">Pernoctaciones por día</td>
<td align="left">MAdM</td>
<td align="left">Mínimo error en previsiones a 2 periodos vista</td>
</tr>
</tbody>
</table>
<p>En concreto los comandos utilizados han sido:</p>
<ul>
<li>Modelo 1: <code>ets(x, model = &quot;MAM&quot;, damped = TRUE)</code></li>
<li>Modelo 2: <code>ets(x, model = &quot;MAM&quot;, damped = TRUE, opt.crit = &quot;amse&quot;, nmse = 2)</code></li>
<li>Modelo 3: <code>ets(x, model = &quot;AAA&quot;, lambda = 0, biasadj = TRUE, damped = TRUE)</code></li>
<li>Modelo 4: <code>ets(x, model = &quot;AAA&quot;, lambda = 0, biasadj = TRUE, damped = TRUE,  opt.crit = &quot;amse&quot;, nmse = 2)</code></li>
<li>Modelo 5: <code>ets(x/monthdays(x), model = &quot;MAM&quot;, damped = TRUE)</code></li>
<li>Modelo 6: <code>ets(x/monthdays(x), model = &quot;MAM&quot;, damped = TRUE, opt.crit = &quot;amse&quot;, nmse = 2)</code></li>
</ul>
<p><br />
</p>
<p><img src="03-11-Ejemplo5_files/figure-html/unnamed-chunk-15-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>De la figura 7 deducimos que aunque todos los métodos resultan razonablemente equivalentes en el largo plazo, en el corto plazo las diferencias pueden ser significativas: la mayor diferencia entre los modelos se da para la previsión a dos y tres meses vista y es de 0.6 puntos porcentuales. Si queremos entrar en matices:</p>
<ul>
<li>Globalmente los modelos que ofrecen mejores previsiones son los modelos 2 y 6, que minimizan el error en previsiones a 2 periodos, en el modelo 2 para Pernoctaciones y en el modelo 6 para Pernoctaciones por día.</li>
<li>A medio y largo plazo el modelo 4 resulta tan competente como los modelos 2 y 6. De nuevo es un modelo que minimiza el error en previsiones a 2 periodos, pero ahora sobre el logaritmo de las Pernoctaciones.</li>
</ul>
<p>Es decir, tanto la estrategia de predecir la serie de Pernoctaciones medias por día, (en lugar de la serie original) como la de usar como criterio para estimar los parámetros del modelo la minimización del error de previsión a dos periodos vista mejoran la calidad de las previsiones extra-muestrales. La combinación de estas dos estrategias es óptima para la previsiones a corto plazo y de las mejores para el medio y largo plazo.</p>
<p><br />
<br />
<br />
<br />
</p>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiUGVybm9jdGFjaW9uZXMgZW4gYWxvamFtaWVudG9zIHR1csOtc3RpY29zIGRlIHR1cmlzdGFzIGV4dHJhbmplcm9zIgpzdWJ0aXRsZTogIkFsaXNhZG8gZXhwb25lbmNpYWwiCmF1dGhvcjogIkl2w6FuIEFycmliYXMgKERlcHRvLiBBbsOhbGlzaXMgRWNvbsOzbWljby4gVW5pdmVyc2l0YXQgZGUgVmFsw6huY2lhKSIKb3V0cHV0OiAKICBodG1sX2RvY3VtZW50OgogICAgdGhlbWU6IGNlcnVsZWFuCiAgICBoaWdobGlnaHQ6IHB5Z21lbnRzIAogICAgZmlnX2NhcHRpb246IGZhbHNlCiAgICBkZl9wcmludDoga2FibGUKICAgIHRvYzogdHJ1ZQogICAgdG9jX2RlcHRoOiAyCiAgICBudW1iZXJfc2VjdGlvbnM6IHRydWUKICAgIHNlbGZfY29udGFpbmVkOiB0cnVlCiAgICBjb2RlX2Rvd25sb2FkOiB0cnVlCi0tLQoKYGBge3IgY2h1bmtfc2V0dXAsIGVjaG8gPSBGQUxTRX0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KHdhcm5pbmcgPSBGQUxTRSwgCiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gRkFMU0UsIAogICAgICAgICAgICAgICAgICAgICAgY29tbWVudCA9ICIiLAogICAgICAgICAgICAgICAgICAgICAgZmlnLmFsaWduID0gImNlbnRlciIsIAogICAgICAgICAgICAgICAgICAgICAgZmlnLnNob3cgPSAiaG9sZCIsCiAgICAgICAgICAgICAgICAgICAgICBmaWcuaGVpZ2h0ID0gNCwKICAgICAgICAgICAgICAgICAgICAgIGZpZy53aWR0aCA9IDgsCiAgICAgICAgICAgICAgICAgICAgICBvdXQud2lkdGggPSAiODAlIikgCmBgYAoKYGBge3Igb3B0aW9uc19zZXR1cCwgZWNobyA9IEZBTFNFfQpvcHRpb25zKHNjaXBlbiA9IDk5OSkgIy0gcGFyYSBxdWl0YXIgbGEgbm90YWNpb24gY2llbnRpZmljYQpgYGAKCmBgYHtyIGxpYnJlcmlhcywgZWNobyA9IEZBTFNFfQpsaWJyYXJ5KGZvcmVjYXN0KQpsaWJyYXJ5KGdncGxvdDIpOyB0aGVtZV9zZXQodGhlbWVfYncoKSkKbGlicmFyeShncmlkRXh0cmEpCmxpYnJhcnkoZ3JpZCkKYGBgCgpcClwKCiMgSW50cm9kdWNjacOzbgoKQ29uc2lkZXJlbW9zIGRlIG51ZXZvIGxhIHNlcmllIHRlbXBvcmFsIGNvcnJlc3BvbmRpZW50ZSBhbCBuw7ptZXJvIGRlIHBlcm5vY3RhY2lvbmVzIHF1ZSBsb3MgdHVyaXN0YXMgZXh0cmFuamVyb3MgcmVhbGl6YW4gZW4gRXNwYcOxYSBlbiBhbG9qYW1pZW50b3MgdHVyw61zdGljb3MgYXV0b3JpemFkb3MgKHF1ZSBsbGFtYXJlbW9zIFBlcm5vY3RhY2lvbmVzIGVuIGFkZWxhbnRlKS4gRXN0YSBzZXJpZSBlc3TDoSBkaXNwb25pYmxlIGVuIEV1cm9zdGF0IGRlc2RlIGVuZXJvIGRlIDIwMDAgaGFzdGEgZGljaWVtYnJlIGRlIDIwMTksIHVuIHRvdGFsIGRlIDIwIGHDsW9zIHkgMjQwIG9ic2VydmFjaW9uZXMuCgpMYSBzZXJpZSBwcmVzZW50YSB0ZW5kZW5jaWEgZGVjcmVjaWVudGUgaGFzdGEgZmluYWxlcyBkZSBsYSBwcmltZXJhIGTDqWNhZGEgZGVsIHByZXNlbnRlIHNpZ2xvIHkgbHVlZ28gY3JlY2llbnRlIGhhc3RhIGxvcyBkb3Mgw7psdGltb3MgYcOxb3MuIExhIGVzdGFjaW9uYWxpZGFkIGRlIG9yZGVuIDEyIGVzdGEgZGV0ZXJtaW5hZGEgcG9yIGxhcyB2YWNhY2lvbmVzIGRlIHZlcmFuby4gRWwgZXNxdWVtYSBlcyBtdWx0aXBsaWNhdGl2by4KCmBgYHtyfQpQZXJub2N0YWNpb25lcyA8LSByZWFkLmNzdjIoIi4vc2VyaWVzL1Blcm5vY3RhY2lvbmVzLmNzdiIsIGhlYWRlciA9IFRSVUUpClBlcm5vY3RhY2lvbmVzIDwtIHRzKFBlcm5vY3RhY2lvbmVzWywyXSwgc3RhcnQgPSAyMDAwLCBmcmVxdWVuY3kgPSAxMikKYGBgCgpgYGB7cn0KYXV0b3Bsb3QoUGVybm9jdGFjaW9uZXMvMTAwMDAwMCwKICAgICAgICAgeGxhYiA9ICIiLAogICAgICAgICB5bGFiID0gIk5vY2hlcyAobWlsbG9uZXMpIiwKICAgICAgICAgbWFpbiA9ICJGaWd1cmEgMS4gUGVybm9jdGFjaW9uZXMgKGRhdG9zIG1lbnN1YWxlcykiKSArCiAgc2NhbGVfeF9jb250aW51b3VzKGJyZWFrcz0gc2VxKDIwMDAsIDIwMjAsIDIpKSAgCmBgYAoKTGEgc2VyaWUgZGUgUGVybm9jdGFjaW9uZXMgYW51YWxpemFkYSAgKHkgZW4gbWlsbG9uZXMgZGUgbm9jaGVzKSBzZXLDrWEKCmBgYHtyfQpQZXJub2N0YWNpb25lc0FudWFsID0gYWdncmVnYXRlKFBlcm5vY3RhY2lvbmVzLzEwMDAwMDAsIEZVTiA9IHN1bSkKCmF1dG9wbG90KFBlcm5vY3RhY2lvbmVzQW51YWwsCiAgICAgICAgIHhsYWIgPSAiIiwKICAgICAgICAgeWxhYiA9ICJOb2NoZXMgKG1pbGxvbmVzKSIsCiAgICAgICAgIG1haW4gPSAiRmlndXJhIDIuIFBlcm5vY3RhY2lvbmVzIikgKwogIHNjYWxlX3hfY29udGludW91cyhicmVha3M9IHNlcSgyMDAwLCAyMDIwLCAyKSkgCmBgYAoKXApcCgoKIyBBanVzdGUgcG9yIGFsaXNhZG8gZXhwb25lbmNpYWwgZGUgbGFzIFBlcm5vY3RhY2lvbmVzIGFudWFsZXMKClZhbW9zIGEgYXBsaWNhciBsYSBtZXRvZG9sb2fDrWEgZGUgYWxpc2FkbyBleHBvbmVuY2lhbCBhIGxhIHNlcmllIGRlIHBlcm5vY3RhY2lvbmVzIGFudWFsZXMuCgpgYGB7cn0KUGVybm9jdGFjaW9uZXNBbnVhbEV0cyA8LSBldHMoUGVybm9jdGFjaW9uZXNBbnVhbCwgbW9kZWwgPSAiWlpaIikKc3VtbWFyeShQZXJub2N0YWNpb25lc0FudWFsRXRzKSAKYGBgCgpTaSBzZSBlc3RpbWEgZWwgbW9kZWxvIHNpbiBpbXBvbmVyIG5pbmd1bmEgcmVzdHJpY2Npw7NuLCBgZXRzYCBpZGVudGlmaWNhIGNvbW8gbW9kZWxvIMOzcHRpbW8gRVRTKEEsTixOKSBkb25kZSBlbCBwYXLDoW1ldHJvICRcYWxwaGEkIGVzIGlndWFsIGEgMS4gRXMgZGVjaXIsIGVsIG1lam9yIG1vZGVsbyBkZSBhbGlzYWRvIGNvcnJlc3BvbmRlIGFsIG3DqXRvZG8gaW5nZW51byBJIGNvbiBlcnJvciBhZGl0aXZvOiAkeV97dCsxfSA9IHlfdCAgKyBcdmFyZXBzaWxvbl97dCsxfSQsIHZpc3RvIHlhIGVuIGVsIGVqZW1wbG8gZGVsIHRlbWEgMy4gRWwgZXJyb3IgcG9yY2VudHVhbCBjb21ldGlkbyAoNC4yJSkgZXMgc2ltaWxhciBhbCBlc3RpbWFkbyBwYXJhIGVsIG3DqXRvZG8gaW5nZW51byBJICg0LjQlKS4gTGEgZGlmZXJlbmNpYSBzZSBkZWJlIGEgcXVlICRcYWxwaGEkIG5vIGVzIGV4YWN0YW1lbnRlIDEuCgpQYXJhIGxhIHNlcmllIGFudWFsLCBhdW5xdWUgaGVtb3MgYW1wbGlhZG8gZWwgbWVuw7ogZGUgbcOpdG9kb3MsIG5vIGhlbW9zIGVuY29udHJhZG8gbmluZ8O6biBtw6l0b2RvIG1lam9yIHF1ZSBlbCBtw6FzIHNlbmNpbGxvOiBwcmVkZWNpciByZXBpdGllbmRvIGxhIMO6bHRpbWEgb2JzZXJ2YWNpw7NuLgoKXApcCgojIFBlcm5vY3RhY2lvbmVzIG1lbnN1YWxlcwoKVmFtb3MgYWhvcmEgYSBhcGxpY2FyIGxhIG1ldG9kb2xvZ8OtYSBkZSBhbGlzYWRvIGV4cG9uZW5jaWFsIGEgbGEgc2VyaWUgbWVuc3VhbCBkZSBwZXJub2N0YWNpb25lcy4KClwKCiMjIEFqdXN0ZSBwb3IgYWxpc2FkbyBleHBvbmVuY2lhbAoKU2kgc2UgZXN0aW1hIGVsIG1vZGVsbyBzaW4gaW1wb25lciBuaW5ndW5hIHJlc3RyaWNjacOzbiwgYGV0c2AgaWRlbnRpZmljYSBjb21vIG1vZGVsbyDDs3B0aW1vIEVUUyhNLEFkLE0pLgoKYGBge3J9ClBlcm5vY3RhY2lvbmVzRXRzIDwtIGV0cyhQZXJub2N0YWNpb25lcywgbW9kZWwgPSAiWlpaIikKc3VtbWFyeShQZXJub2N0YWNpb25lc0V0cykgCmBgYAoKRWwgbW9kZWxvIGVzdGltYWRvIHRpZW5lIHBlbmRpZW50ZSBhZGl0aXZhIGNvbiBhbW9ydGlndWFtaWVudG8sIGVzdGFjaW9uYWxpZGFkIG11bHRpcGxpY2F0aXZhIHkgcmVzaWR1byBtdWx0aXBsaWNhdGl2bzoKJCR5X3t0KzF9ID0gKGxfdCArIFxwaGkgYl90KSBcY2RvdCBzX3t0KzEtbX0gXGNkb3QgKDEgKyBcdmFyZXBzaWxvbl97dCsxfSkuJCQKCkVsIHZhbG9yIGRlICRcYWxwaGEkIGluZGljYSBxdWUgZWwgbml2ZWwgZGUgbGEgc2VyaWUgaGEgaWRvIHZhcmlhbmRvIGxlbnRhbWVudGUgZW4gZWwgdGllbXBvLiBFbCB2YWxvciBkZSAkXGJldGEkIGVzIHByw6FjdGljYW1lbnRlIG51bG8sIHBvciBsbyBxdWUgbGEgcGVuZGllbnRlIHNlIG1hbnRpZW5lIHNpbiBjYW1iaW9zIGR1cmFudGUgZWwgcGVyaW9kbyBkZSBhbsOhbGlzaXMuIEVsIHZhbG9yIGRlICRcZ2FtbWEkIHRhbiBlbGV2YWRvIGluZGljYSBxdWUgbGEgY29tcG9uZW50ZSBlc3RhY2lvbmFsIGhhIGV2b2x1Y2lvbmFkbyBjb24gZWwgcGFzbyBkZSBsb3MgYcOxb3MuIFBvciDDumx0aW1vLCAkXHBoaSQgdG9tYSB1biB2YWxvciByZWxhdGl2YW1lbnRlIGJham8gYXPDrSBxdWUgZGViZW1vcyBhY2VwdGFyIHF1ZSBpbmNsdWlyIGFtb3J0aWd1YW1pZW50byBlbiBlbCBtb2RlbG8gbWVqb3JhIHN1IGFqdXN0ZSBhIGxhIHNlcmllLiAoVsOpYXNlIGZpZ3VyYSAzLikKCmBgYHtyfQphdXRvcGxvdChQZXJub2N0YWNpb25lc0V0cywKICAgICAgICAgeGxhYiA9ICIiLAogICAgICAgICBtYWluID0gIkZpZ3VyYSAzLiBEZXNjb21wb3NpY2nDs24gcGFyYSBQZXJub2N0YWNpb25lcyIpCmBgYAoKTGEgY2FsaWRhZCBkZWwgYWp1c3RlIGVzIGJhc3RhbnRlIGJ1ZW5hLCBjb24gdW4gTUFQRSBkZSAzLjIlIHkgdW4gUk1TRSBkZSAyNTIgbWlsIHBlcm5vY3RhY2lvbmVzIChvIDE5MCBzaSB1c2Ftb3MgZWwgTUFFKS4gQWRlbcOhcywgc2Vnw7puIGVsIE1BU0UsIGVsIG1vZGVsbyBkZSBhbGlzYWRvIGV4cG9uZW5jaWFsIHN1cG9uZSB1bmEgbWVqb3JhIGRlbCAzOCUgcmVzcGVjdG8gZGVsIG3DqXRvZG8gaW5nZW51byBjb24gZXN0YWNpb25hbGlkYWQsIHF1ZSB5YSB1c2Ftb3MgcGFyYSBQZXJub2N0YWNpb25lcyB5IHRlbsOtYSB1biBNQVBFIGRlbCA1LjMlLiBQYXJlY2UgcXVlIHBhcmEgbGEgc2VyaWUgbWVuc3VhbCBlbCBtw6l0b2RvIGRlIEFsaXNhZG8gc2kgc3Vwb25lIHVuYSBtZWpvcmEgbm90YWJsZSBlbiBsYSBjYWxpZGFkIGRlbCBhanVzdGUgcmVzcGVjdG8gZGVsIG3DqXRvZG8gbcOhcyBzZW5jaWxsby4KICAgICAgCkxvcyDDumx0aW1vcyB2YWxvcmVzIGVzdGltYWRvcyBkZWwgbml2ZWwgeSBsYSBlc3RhY2lvbmFsaWRhZCwgcXVlIGNvcnJlc3BvbmRlbiBhIGRpY2llbWJyZSBkZSAyMDE5LCBub3MgcGVybWl0ZW4gbW9zdHJhciBncsOhZmljYW1lbnRlIGxhIGNvbXBvbmVudGUgZXN0YWNpb25hbCBtw6FzIHJlY2llbnRlIChmaWd1cmEgNCkuCgpgYGB7ciwgZXZhbCA9IEZBTFNFfQpUVCA8LSBucm93KFBlcm5vY3RhY2lvbmVzRXRzJHN0YXRlcykKUGVybm9jdGFjaW9uZXNFdHMkc3RhdGVzW1RULF0KYGBgCgpgYGB7ciwgZWNobyA9IEZBTFNFfQpUVCA8LSBucm93KFBlcm5vY3RhY2lvbmVzRXRzJHN0YXRlcykKcm91bmQoUGVybm9jdGFjaW9uZXNFdHMkc3RhdGVzW1RULF0sMikKYGBgCgpgYGB7cn0KY29tcG9uZW50ZUVzdGFjaW9uYWwgPC0gUGVybm9jdGFjaW9uZXNFdHMkc3RhdGVzW1RULCAxNDozXQoKZ2dwbG90KCkgKwogIGdlb21fbGluZShhZXMoeCA9IDE6MTIsIHkgPSBjb21wb25lbnRlRXN0YWNpb25hbCkpICsgCiAgZ2VvbV9obGluZSh5aW50ZXJjZXB0ID0gMSwgY29sb3VyID0gImJsdWUiLCBsdHkgPSAyKSArCiAgZ2d0aXRsZSgiRmlndXJhIDQuIENvbXBvbmVudGUgZXN0YWNpb25hbCIpICsKICB4bGFiKCIiKSArCiAgeWxhYigiRWZlY3RvIGVzdGFjaW9uYWwiKSArCiAgc2NhbGVfeF9jb250aW51b3VzKGJyZWFrcz0gMToxMiwgCiAgICAgICAgICAgICAgICAgICAgIGxhYmVscyA9IGMoIkVuZSIsICJGZWIiLCAiTWFyIiwgIkFiciIsICJNYXkiLCAiSnVuIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkp1bCIsICJBZ28iLCAiU2VwIiwgIk9jdCIsICJOb3YiLCAiRGljIikpIApgYGAKCkVsIG5pdmVsIGRlIGxhcyBwZXJub2N0YWNpb25lcyBlbiBkaWNpZW1icmUgZGUgMjAxOSAow7psdGltYSBvYnNlcnZhY2nDs24pIGVzIGRlIDYuNCBtaWxsb25lcyBkZSBub2NoZXMgeSBsYSBwZW5kaWVudGUgLTIsMzcwLjMzIG5vY2hlcywgcHLDoWN0aWNhbWVudGUgbnVsYSAoZW4gY29tcGFyYWNpw7NuIGNvbiBlbCBuaXZlbCkuIEVsIG1heW9yIG7Dum1lcm8gZGUgcGVybm9jdGFjaW9uZXMgdGllbmUgbHVnYXIgZW4gdmVyYW5vLCBlbiBsb3MgbWVzZXMgZGUganVsaW8geSBhZ29zdG8uIEVuIGNvbmNyZXRvLCBkZXN0YWNhIGVsIG1lcyBhZ29zdG8gY29uIHVuIGluY3JlbWVudG8gZGVsIDgzJSAoYHM1YCkgZW4gbGFzIHBlcm5vY3RhY2lvbmVzIHJlc3BlY3RvIGRlIGxhIG1lZGlhIGFudWFsLiBMYXMgcGVybm9jdGFjaW9uZXMgZW4gaW52aWVybm8gYmFqYW4gZHLDoXN0aWNhbWVudGUgcmVzcGVjdG8gZGUgbGEgbWVkaWEgYW51YWwsIG9ic2VydsOhbmRvc2UgZW4gZGljaWVtYnJlIHVuIDM3JSBtZW5vcyBkZSBwZXJub2N0YWNpb25lcyAoYHMxYCkuIEVsIGVmZWN0byBlc3RhY2lvbmFsIGVzdGltYWRvIHBvciBlbCBtw6l0b2RvIGRlIGFsaXNhZG8gZXMgbXV5IHNpbWlsYXIgYWwgZXN0aW1hZG8gZHVyYW50ZSBsYSBkZXNjcmlwdGl2YSBkZSBsYSBzZXJpZS4KClwKCiMjIFByZWRpY2Npw7NuCgpTaSBwZWRpbW9zIGxvcyB2YWxvcmVzIGRlIHByZWRpY2Npw7NuIHkgc3UgaW50ZXJ2YWxvIGRlIGNvbmZpYW56YSBhbCA5NSUgcGFyYSBsb3MgcHLDs3hpbW9zIHRyZXMgYcOxb3MgdGVuZW1vcyAobnVtw6lyaWNhbWVudGUgc8OzbG8gc2UgbXVlc3RyYSBlbCBwcmltZXIgYcOxbyk6CgpgYGB7cixldmFsPUZBTFNFfQpQZXJub2N0YWNpb25lc0V0c1ByZSA8LSBmb3JlY2FzdChQZXJub2N0YWNpb25lc0V0cywgaCA9IDM2LCBsZXZlbCA9IDk1KQpQZXJub2N0YWNpb25lc0V0c1ByZQpgYGAKCmBgYHtyLGVjaG89RkFMU0V9ClBlcm5vY3RhY2lvbmVzRXRzUHJlIDwtIGZvcmVjYXN0KFBlcm5vY3RhY2lvbmVzRXRzLCBoID0gMzYsIGxldmVsID0gOTUpCmZvcmVjYXN0KFBlcm5vY3RhY2lvbmVzRXRzLCBoID0gMTIsIGxldmVsID0gOTUpCmBgYAoKYGBge3J9CmF1dG9wbG90KFBlcm5vY3RhY2lvbmVzRXRzUHJlLAogICAgICAgICB4bGFiID0gIiIsCiAgICAgICAgIHlsYWIgPSAiQ2Fzb3MiLAogICAgICAgICBtYWluID0gIkZpZ3VyYSA1LiBQZXJub2N0YWNpb25lcyAoMjAwMC0yMDE5KSB5IHByZWRpY2Npw7NuICgyMDIwLTIwMjIpIiwKICAgICAgICAgUEkgPSBGQUxTRSkKYGBgCgpMYXMgcHJlZGljY2lvbmVzIG11ZXN0cmFuIHVuYSBzdWF2ZSB0ZW5kZW5jaWEgZGVjcmVjaWVudGUuIChWw6lhc2UgZmlndXJhIDUuKQoKXAoKIyMgQW7DoWxpc2lzIGRlbCBlcnJvcgoKTGEgIGZpZ3VyYSA2IG11ZXN0cmEgZWwgcmVzaWR1byBkZWwgbW9kZWxvLCBlc3RpbWFkbyBhZGl0aXZhbWVudGUuCgpgYGB7cn0KZXJyb3IgPC0gcmVzaWR1YWxzKFBlcm5vY3RhY2lvbmVzRXRzLCB0eXBlID0gInJlc3BvbnNlIikKc2RlcnJvciA8LSBzZChlcnJvcikKCmF1dG9wbG90KGVycm9yLAogICAgICAgICB4bGFiID0gIiIsCiAgICAgICAgIHlsYWIgPSAiRXJyb3IiLAogICAgICAgICBtYWluID0gIkZpZ3VyYSA2LiBFcnJvciArIEludGVydmVuY2nDs24iLAogICAgICAgICBjb2xvdXIgPSAiYmxhY2siKSArCiAgZ2VvbV9obGluZSh5aW50ZXJjZXB0ID0gYygtMywgLTIsIDIgLDMpKnNkZXJyb3IsIAogICAgICAgICAgICAgY29sb3VyID0gYygicmVkIiwgImJsdWUiLCAiYmx1ZSIsICJyZWQiKSwgbHR5ID0gMikgKyAKICBzY2FsZV94X2NvbnRpbnVvdXMoYnJlYWtzPSBzZXEoMjAwMCwgMjAyMCwgMikpIApgYGAKClNlIGFwcmVjaWFuIGRvcyBtZXNlcywgYWdvc3RvIGRlIDIwMDIgeSBqdWxpbyBkZSAyMDE0IGVuIGxvcyBxdWUgZWwgcmVzaWR1byBzdXBlcmEgbGFzIHRyZXMgZGVzdmlhY2lvbmVzIHTDrXBpY2FzLiBBZGVtw6FzLCBvdHJvcyByZXNpZHVvcyBjZXJjYW5vcyBhIGxhcyB0cmVzIGRlc3ZpYWNpb25lcyB0w61waWNhcyBzb24gc3VzY2VwdGlibGVzIGRlIHNlciBjb25zaWRlcmFkb3MgaW50ZXJ2ZW5jacOzbjogYWdvc3RvIGRlIDIwMDEsIGFicmlsIGRlIDIwMDIgeSBhZ29zdG8gZGUgMjAxNy4gT2JzZXJ2YSBxdWUgdG9kb3MgbGFzIGludGVydmVuY2lvbmVzIGNhZW4gZW4gbWVzZXMgdmFjYWNpb25hbGVzIHkgY3VhdHJvIGRlIGVsbGFzIGVuIHZlcmFuby4gCgpcCgojIyBWYWxpZGFjacOzbgoKWWEgaGVtb3MgdmlzdG8gcXVlIGVsIG1vZGVsbyBjb21ldGUgdW4gZXJyb3IgcHLDs3hpbW8gYWwgMy4yJS4gRXN0ZSB2YWxvciBlcyBsYSBlc3RpbWFjacOzbiBkZWwgX2Vycm9yIGVuIGxhIHByZXZpc2nDs24gaW50cmEtbXVlc3RyYWwgeSBhIHVuIHBlcmlvZG8gdmlzdGFfLiBBIGZpbiBkZSBwb2RlciBlc3RpbWFyIG1lam9yIGxhIGNhcGFjaWRhZCBwcmVkaWN0aXZhIGRlbCBtb2RlbG8gdmFtb3MgYSBlc3RpbWFyIF9lbCBlcnJvciBkZSBwcmV2aXNpw7NuIGV4dHJhLW11ZXN0cmFsIHNlZ8O6biBlbCBob3Jpem9udGUgdGVtcG9yYWxfLgoKQXN1bWltb3MgcXVlIHNlIHByZWNpc2FuIGRpZXogYcOxb3MgcGFyYSBoYWNlciB1bmEgYnVlbmEgZXN0aW1hY2nDs24sICRrPTEyMCQsIHkgcXVlIGVsIGhvcml6b250ZSB0ZW1wb3JhbCBlcyB1biBhw7FvLCAkaCA9IDEyJCBtZXNlcy4KICAKYGBge3J9ICAKayA8LSAxMjAgICAgICAgICAgICAgICAgICNNaW5pbW8gbnVtZXJvIGRlIGRhdG9zIHBhcmEgZXN0aW1hcgpoIDwtIDEyICAgICAgICAgICAgICAgICAgI0hvcml6b250ZSBkZSBsYXMgcHJlZGljaWNvbmVzClRUIDwtIGxlbmd0aChQZXJub2N0YWNpb25lcykgICNMb25naXR1ZCBzZXJpZQpzIDwtIFRUIC0gayAtIGggICAgICAgICAgI1RvdGFsIGRlIGVzdGltYWNpb25lcwoKbWFwZUFsaXNhZG8gPC0gbWF0cml4KE5BLCBzICsgMSwgaCkKZm9yIChpIGluIDA6cykgewogIHRyYWluLnNldCA8LSBzdWJzZXQoUGVybm9jdGFjaW9uZXMsIHN0YXJ0ID0gaSArIDEsIGVuZCA9IGkgKyBrKQogIHRlc3Quc2V0IDwtICBzdWJzZXQoUGVybm9jdGFjaW9uZXMsIHN0YXJ0ID0gaSArIGsgKyAxLCBlbmQgPSBpICsgayArIGgpCiAgCiAgZml0IDwtIGV0cyh0cmFpbi5zZXQsIG1vZGVsID0gIk1BTSIsIGRhbXBlZCA9IFRSVUUpCiAgZmNhc3Q8LWZvcmVjYXN0KGZpdCwgaCA9IGgpCiAgbWFwZUFsaXNhZG9baSArIDEsXSA8LSAxMDAqYWJzKHRlc3Quc2V0IC0gZmNhc3QkbWVhbikvdGVzdC5zZXQKfQoKZXJyb3JBbGlzYWRvIDwtIGNvbE1lYW5zKG1hcGVBbGlzYWRvKQplcnJvckFsaXNhZG8KCmdncGxvdCgpICsKICBnZW9tX2xpbmUoYWVzKHggPSAxOjEyLCB5ID0gZXJyb3JBbGlzYWRvKSkgKwogIGdndGl0bGUoIkZpZ3VyYSA3LiBFcnJvciBkZSBwcmVkaWNjacOzbiBzZWfDum4gaG9yaXpvbnRlIHRlbXBvcmFsIikgKwogIHhsYWIoIkhvcml6b250ZSB0ZW1wb3JhbCBkZSBwcmVkaWNjacOzbiIpICsKICB5bGFiKCJNQVBFIikgKwogIHNjYWxlX3hfY29udGludW91cyhicmVha3M9IDE6MTIpCmBgYAoKTGEgZmlndXJhIDcgbXVlc3RyYSBlbCBlcnJvciBkZSBwcmV2aXNpw7NuIGV4dHJhLW11ZXN0cmFsIHNlZ8O6biBlbCBob3Jpem9udGUgZGUgcHJldmlzacOzbi4gU2Ugb2JzZXJ2YSBjb21vIHBhcmEgaG9yaXpvbnRlcyBkZSBwcmVkaWNjacOzbiBkZSB1bm8gYSBudWV2ZSBtZXNlcyBlbCBlcnJvciBkZSBwcmVkaWNjacOzbiBhdW1lbnRhIHNlZ8O6biBhdW1lbnRhIGVsIGhvcml6b250ZSBkZSBwcmVkaWNjacOzbiwgcGFzYW5kbyBkZWwgMy44JSBwYXJhIHByZWRpY2Npb25lcyBhIHVuIG1lcyB2aXN0YSBoYXN0YSBlbCA1LjglIHBhcmEgcHJlZGljY2lvbmVzIGEgbnVldmUgbWVzZXMgdmlzdGEuCgpTaW4gZW1iYXJnbywgcGFyYSBwcmV2aXNpb25lcyBhIG3DoXMgbGFyZ28gcGxhem8gZWwgZXJyb3IgZGUgcHJlZGljY2nDs24gZGVjcmVjZSwgaGFzdGEgc2l0dWFyc2UgZW4gZWwgNSUgZW4gbGFzIHByZXZpc2lvbmVzIGEgdW4gYcOxbyB2aXN0YS4gU29ycHJlbmRlbnRlbWVudGUsIGEgdW4gYcOxbyB2aXN0YSBzZSBwcm9kdWNlIHVuIHNhbHRvIGVuIGVsIGVycm9yLCBxdWUgYWxjYW56YSBlbCA2LjclLgoKClwKXAoKIyBNb2RlbG9zIGFsdGVybmF0aXZvcwoKwr9Qb2RlbW9zIHJlZHVjaXIgZWwgZXJyb3IgZXh0cmEtbXVlc3RyYWwgZGUgcHJldmlzacOzbiBzaSBjYW1iaWFtb3MgbGFzIG9wY2lvbmVzIHBvciBkZWZlY3RvIGRlIGBldHNgIG8gbGEgc2VyaWUgYSBhbmFsaXphcj8gUG9yIGVqZW1wbG8sIMK/bWVqb3JhbW9zIHNpIGFwbGljYW1vcyBlbCBtw6l0b2RvIGRlIGFsaXNhZG8gc29icmUgZWwgbG9nYXJpdG1vIGRlIGxhIHNlcmllIG8gdXNhbW9zIGVsIGNyaXRlcmlvIGRlIG1pbmltaXphciBlbCBlcnJvciBkZSBsYXMgcHJldmlzaW9uZXMgYSBkb3MgbWVzZXMgdmlzdGEsIG8gdHJhYmFqYW1vcyBjb24gbGFzIHBlcm5vY3RhY2lvbmVzIHBvciBkw61hPwoKTGEgZmlndXJhIDggbXVlc3RyYSBlbCBlcnJvciBkZSBwcmV2aXNpw7NuIGV4dHJhLW11ZXN0cmFsIHNlZ8O6biBlbCBob3Jpem9udGUgZGUgcHJldmlzacOzbiBwYXJhIGxvcyBzaWd1aWVudGVzIG1vZGVsb3MgKHRvZG9zIGNvbiBhbW9ydGlndWFtaWVudG8pOgoKfCoqSWQqKiAgfCoqVHJhbnNmb3JtYWNpw7NuKiogfCoqTW9kZWxvKiogfCoqTcOpdG9kbyBlc3RpbWFjacOzbioqIHwKfDotLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tLXwKfCAxICAgICAgfE5pbmd1bmEgICAgICAgICAgICB8TUFkTSAgICAgICAgfE3DoXhpbWEgdmVyb3NpbWlsaXR1ZCAgfAp8IDIgICAgICB8TmluZ3VuYSAgICAgICAgICAgIHxNQWRNICAgICAgICB8TcOtbmltbyBlcnJvciBlbiBwcmV2aXNpb25lcyBhIDIgcGVyaW9kb3MgdmlzdGEgIHwKfCAzICAgICAgfExvZ2FyaXRtbyAgICAgICAgICB8QUFkQSAgICAgICAgfE3DoXhpbWEgdmVyb3NpbWlsaXR1ZCAgfAp8IDQgICAgICB8TG9nYXJ0aW1vICAgICAgICAgIHxBQWRBICAgICAgICB8TcOtbmltbyBlcnJvciBlbiBwcmV2aXNpb25lcyBhIDIgcGVyaW9kb3MgdmlzdGEgIHwKfCA1ICAgICAgfFBlcm5vY3RhY2lvbmVzIHBvciBkw61hIHxNQWRNICAgICAgICB8TcOheGltYSB2ZXJvc2ltaWxpdHVkICB8CnwgNiAgICAgIHxQZXJub2N0YWNpb25lcyBwb3IgZMOtYSB8TUFkTSAgICAgICAgfE3DrW5pbW8gZXJyb3IgZW4gcHJldmlzaW9uZXMgYSAyIHBlcmlvZG9zIHZpc3RhICB8CgpFbiBjb25jcmV0byBsb3MgY29tYW5kb3MgdXRpbGl6YWRvcyBoYW4gc2lkbzogCgoqIE1vZGVsbyAxOiBgZXRzKHgsIG1vZGVsID0gIk1BTSIsIGRhbXBlZCA9IFRSVUUpYAoqIE1vZGVsbyAyOiBgZXRzKHgsIG1vZGVsID0gIk1BTSIsIGRhbXBlZCA9IFRSVUUsIG9wdC5jcml0ID0gImFtc2UiLCBubXNlID0gMilgCiogTW9kZWxvIDM6IGBldHMoeCwgbW9kZWwgPSAiQUFBIiwgbGFtYmRhID0gMCwgYmlhc2FkaiA9IFRSVUUsIGRhbXBlZCA9IFRSVUUpYAoqIE1vZGVsbyA0OiBgZXRzKHgsIG1vZGVsID0gIkFBQSIsIGxhbWJkYSA9IDAsIGJpYXNhZGogPSBUUlVFLCBkYW1wZWQgPSBUUlVFLCAgb3B0LmNyaXQgPSAiYW1zZSIsIG5tc2UgPSAyKWAKKiBNb2RlbG8gNTogYGV0cyh4L21vbnRoZGF5cyh4KSwgbW9kZWwgPSAiTUFNIiwgZGFtcGVkID0gVFJVRSlgCiogTW9kZWxvIDY6IGBldHMoeC9tb250aGRheXMoeCksIG1vZGVsID0gIk1BTSIsIGRhbXBlZCA9IFRSVUUsIG9wdC5jcml0ID0gImFtc2UiLCBubXNlID0gMilgCgpcCgpgYGB7ciwgZWNobyA9IEZBTFNFfSAgCmsgPC0gMTIwICAgICAgICAgICAgICAgICAjTWluaW1vIG51bWVybyBkZSBkYXRvcyBwYXJhIGVzdGltYXIKaCA8LSAxMiAgICAgICAgICAgICAgICAgICNIb3Jpem9udGUgZGUgbGFzIHByZWRpY2ljb25lcwpUVCA8LSBsZW5ndGgoUGVybm9jdGFjaW9uZXMpICAjTG9uZ2l0dWQgc2VyaWUKcyA8LSBUVCAtIGsgLSBoICAgICAgICAgICNUb3RhbCBkZSBlc3RpbWFjaW9uZXMKCm1hcGVBbGlzYWRvMSA8LSBtYXRyaXgoTkEsIHMgKyAxLCBoKQptYXBlQWxpc2FkbzIgPC0gbWF0cml4KE5BLCBzICsgMSwgaCkKbWFwZUFsaXNhZG8zIDwtIG1hdHJpeChOQSwgcyArIDEsIGgpCm1hcGVBbGlzYWRvNCA8LSBtYXRyaXgoTkEsIHMgKyAxLCBoKQptYXBlQWxpc2FkbzUgPC0gbWF0cml4KE5BLCBzICsgMSwgaCkKbWFwZUFsaXNhZG82IDwtIG1hdHJpeChOQSwgcyArIDEsIGgpCgpmb3IgKGkgaW4gMDpzKSB7CiAgdHJhaW4uc2V0IDwtIHN1YnNldChQZXJub2N0YWNpb25lcywgc3RhcnQgPSBpICsgMSwgZW5kID0gaSArIGspCiAgdGVzdC5zZXQgPC0gIHN1YnNldChQZXJub2N0YWNpb25lcywgc3RhcnQgPSBpICsgayArIDEsIGVuZCA9IGkgKyBrICsgaCkKICAKICBmaXQgPC0gZXRzKHRyYWluLnNldCwgbW9kZWwgPSAiTUFNIiwgZGFtcGVkID0gVFJVRSkKICBmY2FzdDwtZm9yZWNhc3QoZml0LCBoID0gaCkKICBtYXBlQWxpc2FkbzFbaSArIDEsXSA8LSAxMDAqYWJzKHRlc3Quc2V0IC0gZmNhc3QkbWVhbikvdGVzdC5zZXQKICAKICBmaXQgPC0gZXRzKHRyYWluLnNldCwgbW9kZWwgPSAiTUFNIiwgZGFtcGVkID0gVFJVRSwgb3B0LmNyaXQgPSAiYW1zZSIsIG5tc2UgPSAyKQogIGZjYXN0PC1mb3JlY2FzdChmaXQsIGggPSBoKQogIG1hcGVBbGlzYWRvMltpICsgMSxdIDwtIDEwMCphYnModGVzdC5zZXQgLSBmY2FzdCRtZWFuKS90ZXN0LnNldAogIAogIGZpdCA8LSBldHModHJhaW4uc2V0LCBtb2RlbCA9ICJBQUEiLCBsYW1iZGEgPSAwLCBiaWFzYWRqID0gVFJVRSwgZGFtcGVkID0gVFJVRSkKICBmY2FzdDwtZm9yZWNhc3QoZml0LCBoID0gaCwgYmlhc2FkaiA9IFRSVUUpCiAgbWFwZUFsaXNhZG8zW2kgKyAxLF0gPC0gMTAwKmFicyh0ZXN0LnNldCAtIGZjYXN0JG1lYW4pL3Rlc3Quc2V0CiAgCiAgZml0IDwtIGV0cyh0cmFpbi5zZXQsIG1vZGVsID0gIkFBQSIsIGxhbWJkYSA9IDAsIGJpYXNhZGogPSBUUlVFLCBkYW1wZWQgPSBUUlVFLCAgb3B0LmNyaXQgPSAiYW1zZSIsIG5tc2UgPSAyKQogIGZjYXN0PC1mb3JlY2FzdChmaXQsIGggPSBoLCBiaWFzYWRqID0gVFJVRSkKICBtYXBlQWxpc2FkbzRbaSArIDEsXSA8LSAxMDAqYWJzKHRlc3Quc2V0IC0gZmNhc3QkbWVhbikvdGVzdC5zZXQKICAKICBmaXQgPC0gZXRzKHRyYWluLnNldC9tb250aGRheXModHJhaW4uc2V0KSwgbW9kZWwgPSAiTUFNIiwgZGFtcGVkID0gVFJVRSkKICBmY2FzdDwtZm9yZWNhc3QoZml0LCBoID0gaCkKICBtYXBlQWxpc2FkbzVbaSArIDEsXSA8LSAxMDAqYWJzKHRlc3Quc2V0IC0gZmNhc3QkbWVhbiAqIG1vbnRoZGF5cyhmY2FzdCRtZWFuKSkvdGVzdC5zZXQKICAKICBmaXQgPC0gZXRzKHRyYWluLnNldC9tb250aGRheXModHJhaW4uc2V0KSwgbW9kZWwgPSAiTUFNIiwgZGFtcGVkID0gVFJVRSwgb3B0LmNyaXQgPSAiYW1zZSIsIG5tc2UgPSAyKQogIGZjYXN0PC1mb3JlY2FzdChmaXQsIGggPSBoKQogIG1hcGVBbGlzYWRvNltpICsgMSxdIDwtIDEwMCphYnModGVzdC5zZXQgLSBmY2FzdCRtZWFuICogbW9udGhkYXlzKGZjYXN0JG1lYW4pKS90ZXN0LnNldAp9CgoKZXJyb3JBbGlzYWRvMSA8LSBjb2xNZWFucyhtYXBlQWxpc2FkbzEpCmVycm9yQWxpc2FkbzIgPC0gY29sTWVhbnMobWFwZUFsaXNhZG8yKQplcnJvckFsaXNhZG8zIDwtIGNvbE1lYW5zKG1hcGVBbGlzYWRvMykKZXJyb3JBbGlzYWRvNCA8LSBjb2xNZWFucyhtYXBlQWxpc2FkbzQpCmVycm9yQWxpc2FkbzUgPC0gY29sTWVhbnMobWFwZUFsaXNhZG81KQplcnJvckFsaXNhZG82IDwtIGNvbE1lYW5zKG1hcGVBbGlzYWRvNikKCmdncGxvdCgpICsKICBnZW9tX2xpbmUoYWVzKHggPSAxOjEyLCB5ID0gZXJyb3JBbGlzYWRvMSwgY29sb3VyID0gIk1vZGVsbyAxIikpICsKICBnZW9tX2xpbmUoYWVzKHggPSAxOjEyLCB5ID0gZXJyb3JBbGlzYWRvMiwgY29sb3VyID0gIk1vZGVsbyAyIikpICsgCiAgZ2VvbV9saW5lKGFlcyh4ID0gMToxMiwgeSA9IGVycm9yQWxpc2FkbzMsIGNvbG91ciA9ICJNb2RlbG8gMyIpKSArCiAgZ2VvbV9saW5lKGFlcyh4ID0gMToxMiwgeSA9IGVycm9yQWxpc2FkbzQsIGNvbG91ciA9ICJNb2RlbG8gNCIpKSArCiAgZ2VvbV9saW5lKGFlcyh4ID0gMToxMiwgeSA9IGVycm9yQWxpc2FkbzUsIGNvbG91ciA9ICJNb2RlbG8gNSIpKSArCiAgZ2VvbV9saW5lKGFlcyh4ID0gMToxMiwgeSA9IGVycm9yQWxpc2FkbzYsIGNvbG91ciA9ICJNb2RlbG8gNiIpKSArCiAgZ2d0aXRsZSgiRmlndXJhIDguIEVycm9yZXMgZGUgcHJldmlzacOzbiBleHRyYS1tdWVzdHJhbC4gVmFyaW9zIG1vZGVsb3MiKSArCiAgeGxhYigiIikgKwogIHlsYWIoIk1BUEUiKSArCiAgc2NhbGVfeF9jb250aW51b3VzKGJyZWFrcz0gMToxMikgKwogIHNjYWxlX2NvbG9yX2Rpc2NyZXRlKG5hbWUgPSAiTW9kZWxvcyIpCmBgYAoKRGUgbGEgZmlndXJhIDcgZGVkdWNpbW9zIHF1ZSBhdW5xdWUgdG9kb3MgbG9zIG3DqXRvZG9zIHJlc3VsdGFuIHJhem9uYWJsZW1lbnRlIGVxdWl2YWxlbnRlcyBlbiBlbCBsYXJnbyBwbGF6bywgZW4gZWwgY29ydG8gcGxhem8gbGFzIGRpZmVyZW5jaWFzIHB1ZWRlbiBzZXIgc2lnbmlmaWNhdGl2YXM6IGxhIG1heW9yIGRpZmVyZW5jaWEgZW50cmUgbG9zIG1vZGVsb3Mgc2UgZGEgcGFyYSBsYSBwcmV2aXNpw7NuIGEgZG9zIHkgdHJlcyBtZXNlcyB2aXN0YSB5IGVzIGRlIDAuNiBwdW50b3MgcG9yY2VudHVhbGVzLiBTaSBxdWVyZW1vcyBlbnRyYXIgZW4gbWF0aWNlczoKCiogR2xvYmFsbWVudGUgbG9zIG1vZGVsb3MgcXVlIG9mcmVjZW4gbWVqb3JlcyBwcmV2aXNpb25lcyBzb24gbG9zIG1vZGVsb3MgMiB5IDYsIHF1ZSBtaW5pbWl6YW4gZWwgZXJyb3IgZW4gcHJldmlzaW9uZXMgYSAyIHBlcmlvZG9zLCBlbiBlbCBtb2RlbG8gMiBwYXJhIFBlcm5vY3RhY2lvbmVzIHkgZW4gZWwgbW9kZWxvIDYgcGFyYSBQZXJub2N0YWNpb25lcyBwb3IgZMOtYS4KKiBBIG1lZGlvIHkgbGFyZ28gcGxhem8gZWwgbW9kZWxvIDQgcmVzdWx0YSB0YW4gY29tcGV0ZW50ZSBjb21vIGxvcyBtb2RlbG9zIDIgeSA2LiBEZSBudWV2byBlcyB1biBtb2RlbG8gcXVlIG1pbmltaXphIGVsIGVycm9yIGVuIHByZXZpc2lvbmVzIGEgMiBwZXJpb2RvcywgcGVybyBhaG9yYSBzb2JyZSBlbCBsb2dhcml0bW8gZGUgbGFzIFBlcm5vY3RhY2lvbmVzLgoKRXMgZGVjaXIsIHRhbnRvIGxhIGVzdHJhdGVnaWEgZGUgcHJlZGVjaXIgbGEgc2VyaWUgZGUgUGVybm9jdGFjaW9uZXMgbWVkaWFzIHBvciBkw61hLCAoZW4gbHVnYXIgZGUgbGEgc2VyaWUgb3JpZ2luYWwpIGNvbW8gbGEgZGUgdXNhciBjb21vIGNyaXRlcmlvIHBhcmEgZXN0aW1hciBsb3MgcGFyw6FtZXRyb3MgZGVsIG1vZGVsbyBsYSBtaW5pbWl6YWNpw7NuIGRlbCBlcnJvciBkZSBwcmV2aXNpw7NuIGEgZG9zIHBlcmlvZG9zIHZpc3RhIG1lam9yYW4gbGEgY2FsaWRhZCBkZSBsYXMgcHJldmlzaW9uZXMgZXh0cmEtbXVlc3RyYWxlcy4gTGEgY29tYmluYWNpw7NuIGRlIGVzdGFzIGRvcyBlc3RyYXRlZ2lhcyBlcyDDs3B0aW1hIHBhcmEgbGEgcHJldmlzaW9uZXMgYSBjb3J0byBwbGF6byB5IGRlIGxhcyBtZWpvcmVzIHBhcmEgZWwgbWVkaW8geSBsYXJnbyBwbGF6by4KClwKXApcClwKCg==</div>
<footer class="footer">
  
<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
<br>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.  <div class="text-muted">Website created by Iv&aacute;n Arribas. &copy;  2020. If you find any bugs please report them to <a href="mailto:ivan.arribas@uv.es"> ivan.arribas@uv.es</a>.</div>
  
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("03-11-Ejemplo5.Rmd");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
