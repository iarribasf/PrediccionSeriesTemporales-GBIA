<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Iván Arribas (Depto. Análisis Económico. Universitat de València)" />


<title>Pernoctaciones en alojamientos turísticos de turistas extranjeros</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Predicción con Datos Temporales</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="01-Guia-curso.html">
    <span class="fa fa-graduation-cap"></span>
     
    Guía del curso
  </a>
</li>
<li>
  <a href="02-Logistica.html">
    <span class="fa fa-laptop"></span>
     
    Logística
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-book"></span>
     
    Diapos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Teoría</li>
    <li>
      <a href="03-01-Tema1.html">Tema 1: Introducción</a>
    </li>
    <li>
      <a href="03-02-Tema2.html">Tema 2: Definición</a>
    </li>
    <li>
      <a href="03-03-Tema3.html">Tema 3: Métodos sencillos</a>
    </li>
    <li>
      <a href="03-04-Tema4.html">Tema 4: Media móvil</a>
    </li>
    <li>
      <a href="03-05-Tema5.html">Tema 5: Alisado</a>
    </li>
    <li>
      <a href="03-06-Tema6.html">Tema 6: ARIMA</a>
    </li>
    <li>
      <a href="03-07-Tema7.html">Tema 7: SARIMA</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Ejemplo de aplicación</li>
    <li>
      <a href="03-08-Ejemplo2.html">Ejemplo Tema 2</a>
    </li>
    <li>
      <a href="03-09-Ejemplo3.html">Ejemplo Tema 3</a>
    </li>
    <li>
      <a href="03-10-Ejemplo4.html">Ejemplo Tema 4</a>
    </li>
    <li>
      <a href="03-11-Ejemplo5.html">Ejemplo Tema 5</a>
    </li>
    <li>
      <a href="03-12-Ejemplo6.html">Ejemplo Tema 6</a>
    </li>
    <li>
      <a href="03-13-Ejemplo7.html">Ejemplo Tema 7</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Otro ejemplo</li>
    <li>
      <a href="03-14-Ejemplo-Pasajeros.html">Ejemplo de Pasajeros</a>
    </li>
  </ul>
</li>
<li>
  <a href="04-Recursos-R.html">
    <span class="fa fa-code"></span>
     
    Recursos de R
  </a>
</li>
<li>
  <a href="05-Evaluacion_Continua.html">
    <span class="fa fa-edit"></span>
     
    Evaluacion Continua
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-download"></span>
     
    Más
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">R</li>
    <li>
      <a href="https://cran.r-project.org">Dónde está R</a>
    </li>
    <li>
      <a href="https://rstudio.com">Donde está RStudio</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Markdown</li>
    <li>
      <a href="https://bookdown.org/yihui/rmarkdown/">Markdown</a>
    </li>
    <li>
      <a href="https://rmarkdown.rstudio.com/lesson-1.html">R Markdown</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Otros</li>
    <li>
      <a href="https://www.r-bloggers.com">Blog sobre R</a>
    </li>
    <li>
      <a href="https://bookdown.org">Libros online que debes conocer</a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Pernoctaciones en alojamientos turísticos de turistas extranjeros</h1>
<h3 class="subtitle">Medias móviles</h3>
<h4 class="author">Iván Arribas (Depto. Análisis Económico. Universitat de València)</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#introducción"><span class="toc-section-number">1</span> Introducción</a></li>
<li><a href="#predicción-por-el-método-de-las-medias-móviles"><span class="toc-section-number">2</span> Predicción por el método de las medias móviles</a></li>
<li><a href="#selección-del-orden-y-predicción-usando-origen-de-predicción-móvil"><span class="toc-section-number">3</span> Selección del orden y predicción usando origen de predicción móvil</a></li>
</ul>
</div>

<p><br />
<br />
</p>
<div id="introducción" class="section level1">
<h1><span class="header-section-number">1</span> Introducción</h1>
<p>Consideremos de nuevo la serie temporal correspondiente al número de pernoctaciones que los turistas extranjeros realizan en España en alojamientos turísticos autorizados (que llamaremos Pernoctaciones en adelante). Esta serie está disponible en Eurostat desde enero de 2000 hasta diciembre de 2019, un total de 20 años y 240 observaciones.</p>
<p>La serie presenta tendencia decreciente hasta finales de la primera década del presente siglo y luego creciente hasta los dos últimos años. La estacionalidad de orden 12 esta determinada por las vacaciones de verano. El esquema es multiplicativo.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">Pernoctaciones &lt;-<span class="st"> </span><span class="kw">read.csv2</span>(<span class="st">&quot;./series/Pernoctaciones.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">Pernoctaciones &lt;-<span class="st"> </span><span class="kw">ts</span>(Pernoctaciones[,<span class="dv">2</span>], <span class="dt">start =</span> <span class="dv">2000</span>, <span class="dt">frequency =</span> <span class="dv">12</span>)</a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">autoplot</span>(Pernoctaciones<span class="op">/</span><span class="dv">1000000</span>,</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">         <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">         <span class="dt">ylab =</span> <span class="st">&quot;Noches (millones)&quot;</span>,</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">         <span class="dt">main =</span> <span class="st">&quot;Figura 1. Pernoctaciones (datos mensuales)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks=</span> <span class="kw">seq</span>(<span class="dv">2000</span>, <span class="dv">2020</span>, <span class="dv">2</span>))  </a></code></pre></div>
<p><img src="03-10-Ejemplo4_files/figure-html/unnamed-chunk-2-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p><br />
<br />
</p>
</div>
<div id="predicción-por-el-método-de-las-medias-móviles" class="section level1">
<h1><span class="header-section-number">2</span> Predicción por el método de las medias móviles</h1>
<p>Vamos ajustar y predecir la serie de pernoctaciones por el método de las medias móviles. Como este método asume que la serie no tiene estacionalidad, vamos a trabajar con la serie anualizada de pernoctaciones, donde cada dato será el número de pernoctaciones anuales.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">Pernoctaciones &lt;-<span class="st"> </span><span class="kw">aggregate</span>(Pernoctaciones, <span class="dt">FUN =</span> sum)</a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">autoplot</span>(Pernoctaciones<span class="op">/</span><span class="dv">1000000</span>,</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">         <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">         <span class="dt">ylab =</span> <span class="st">&quot;Noches (millones)&quot;</span>,</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">         <span class="dt">main =</span> <span class="st">&quot;Figura 2. Pernoctaciones (datos anuales)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks=</span> <span class="kw">seq</span>(<span class="dv">2000</span>, <span class="dv">2020</span>, <span class="dv">2</span>))  </a></code></pre></div>
<p><img src="03-10-Ejemplo4_files/figure-html/unnamed-chunk-4-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Dado que la serie tiene tendencia, usaremos las dobles medias móviles para estimar el nivel y la pendiente, y a partir de ellas obtener la serie ajustada y las predicciones.</p>
<p><code>R</code> no nos proporciona una función específica para aplicar el método de las dobles medias móviles, así usaremos nuestra función <code>dmm</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">dmm &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">r =</span> <span class="dv">3</span>, <span class="dt">h =</span> <span class="dv">5</span>) {</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">  z &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">  z<span class="op">$</span>x &lt;-<span class="st"> </span>x</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">  z<span class="op">$</span>orden =<span class="st"> </span>r</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">  </a>
<a class="sourceLine" id="cb5-6" data-line-number="6">  TT &lt;-<span class="st"> </span><span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">  inicio &lt;-<span class="st"> </span><span class="kw">start</span>(x)</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">  frecuencia &lt;-<span class="kw">frequency</span>(x)</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">  </a>
<a class="sourceLine" id="cb5-10" data-line-number="10">  z<span class="op">$</span>mm1 &lt;-<span class="st"> </span>stats<span class="op">::</span><span class="kw">filter</span>(x, <span class="kw">rep</span>(<span class="dv">1</span><span class="op">/</span>r, r), <span class="dt">side =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">  z<span class="op">$</span>mm2 &lt;-<span class="st"> </span>stats<span class="op">::</span><span class="kw">filter</span>(z<span class="op">$</span>mm1, <span class="kw">rep</span>(<span class="dv">1</span><span class="op">/</span>r, r), <span class="dt">side =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">  </a>
<a class="sourceLine" id="cb5-13" data-line-number="13">  z<span class="op">$</span>l &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>z<span class="op">$</span>mm1 <span class="op">-</span><span class="st"> </span>z<span class="op">$</span>mm2</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">  z<span class="op">$</span>b &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>(z<span class="op">$</span>mm1 <span class="op">-</span><span class="st"> </span>z<span class="op">$</span>mm2) <span class="op">/</span><span class="st"> </span>(r <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">  </a>
<a class="sourceLine" id="cb5-16" data-line-number="16">  z<span class="op">$</span>fitted &lt;-<span class="st"> </span><span class="kw">ts</span>(<span class="kw">c</span>(<span class="ot">NA</span>, z<span class="op">$</span>l[<span class="op">-</span>TT] <span class="op">+</span><span class="st"> </span>z<span class="op">$</span>b[<span class="op">-</span>TT]), <span class="dt">start =</span> inicio, <span class="dt">freq =</span> frecuencia)</a>
<a class="sourceLine" id="cb5-17" data-line-number="17">  z<span class="op">$</span>mean &lt;-<span class="st"> </span><span class="kw">ts</span>(z<span class="op">$</span>l[TT] <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span><span class="op">:</span>h) <span class="op">*</span><span class="st"> </span>z<span class="op">$</span>b[TT], <span class="dt">start =</span> <span class="kw">time</span>(x)[TT] <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">/</span>frecuencia, <span class="dt">freq =</span> frecuencia)</a>
<a class="sourceLine" id="cb5-18" data-line-number="18">  z<span class="op">$</span>residuals &lt;-<span class="st"> </span>x <span class="op">-</span><span class="st"> </span>z<span class="op">$</span>fitted</a>
<a class="sourceLine" id="cb5-19" data-line-number="19">  <span class="kw">class</span>(z) &lt;-<span class="st"> &quot;forecast&quot;</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20">  z</a>
<a class="sourceLine" id="cb5-21" data-line-number="21">}</a></code></pre></div>
<p>Veamos primero los resultados asumiendo un orden de la media móvil de 4 años (<span class="math inline">\(r = 4\)</span>) y realizando una predicción para los próximos 5 años (<code>h = 5</code>). La figura 3 muestra la serie Pernoctaciones, la serie ajustada y la predicción.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">PernoctacionesPre &lt;-<span class="st"> </span><span class="kw">dmm</span>(Pernoctaciones, <span class="dt">r =</span> <span class="dv">4</span>, <span class="dt">h =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">autoplot</span>(Pernoctaciones, <span class="dt">series =</span> <span class="st">&quot;Pernoctaciones&quot;</span>,</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">         <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">         <span class="dt">ylab =</span> <span class="st">&quot;Noches&quot;</span>,</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">         <span class="dt">main =</span> <span class="st">&quot;Figura 3. Pernoctaciones y predicción&quot;) +</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="st">  autolayer(PernoctacionesPre$fitted, series = &quot;</span>Pred. intra<span class="st">&quot;) + </span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="st">  autolayer(PernoctacionesPre$mean, series = &quot;</span>Pred. extra<span class="st">&quot;)</span></a></code></pre></div>
<p><img src="03-10-Ejemplo4_files/figure-html/unnamed-chunk-6-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Un desastre. El orden es muy elevado así que perdemos 7 observaciones al inicio, le cuesta capturar el primer cambio de tendencia –en la serie original tiene lugar en 2010 y en la serie estimada en 2013– y las predicciones no tienen en cuenta el descenso en las pernoctaciones ocurrido en los dos últimos años.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">accuracy</span>(PernoctacionesPre)</a></code></pre></div>
<pre><code>                  ME    RMSE     MAE      MPE     MAPE     MASE      ACF1
Training set 1890816 5489300 4980144 2.777245 7.218397 1.564304 0.4045912</code></pre>
<p>Así, no sorprenden los valores de los criterios de bondad de ajuste: un error medio muy elevado, indicativo de sesgo en las predicciones; un error porcentual de 7.2%, algo elevado; y un error medio (RMSE) de casi 5.5 millones de pernoctaciones. Estos errores son superiores a los obtenidos con el método Ingenuo I (RMSE = 3.8 millones de pernoctaciones; MAPE = 4.4%).</p>
<p><br />
<br />
</p>
</div>
<div id="selección-del-orden-y-predicción-usando-origen-de-predicción-móvil" class="section level1">
<h1><span class="header-section-number">3</span> Selección del orden y predicción usando origen de predicción móvil</h1>
<p>Vamos a mejorar nuestra primera aproximación usando el método del origen de predicción móvil para identificar el orden óptimo de la doble media móvil según que la predicción sea de 1 a 5 años.</p>
<p>Consideraremos órdenes desde 2 hasta 5, y asumiremos que el mínimo número de años para hacer las estimaciones es de 10</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">k &lt;-<span class="st"> </span><span class="dv">10</span>                   <span class="co">#Minimo numero de datos para estimar</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">h &lt;-<span class="st"> </span><span class="dv">5</span>                    <span class="co">#Horizonte de las prediciciones</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3">TT &lt;-<span class="st"> </span><span class="kw">length</span>(Pernoctaciones) <span class="co">#Longitud serie</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4">s &lt;-<span class="st"> </span>TT <span class="op">-</span><span class="st"> </span>k <span class="op">-</span><span class="st"> </span>h           <span class="co">#Total de estimaciones</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"></a>
<a class="sourceLine" id="cb9-6" data-line-number="6">MAPE &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow =</span> <span class="dv">4</span>, <span class="dt">ncol =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="kw">rownames</span>(MAPE) &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="kw">colnames</span>(MAPE) &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span>h</a>
<a class="sourceLine" id="cb9-9" data-line-number="9"></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="cf">for</span> (r <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="dv">5</span>) {</a>
<a class="sourceLine" id="cb9-11" data-line-number="11"></a>
<a class="sourceLine" id="cb9-12" data-line-number="12">  tmpMape &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, s <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, h)</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">  </a>
<a class="sourceLine" id="cb9-14" data-line-number="14">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">0</span><span class="op">:</span>s) {</a>
<a class="sourceLine" id="cb9-15" data-line-number="15">  </a>
<a class="sourceLine" id="cb9-16" data-line-number="16">    train.set &lt;-<span class="st"> </span><span class="kw">subset</span>(Pernoctaciones, <span class="dt">start =</span> i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">end =</span> i <span class="op">+</span><span class="st"> </span>k)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17">    test.set &lt;-<span class="st">  </span><span class="kw">subset</span>(Pernoctaciones, <span class="dt">start =</span> i <span class="op">+</span><span class="st"> </span>k <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">end =</span> i <span class="op">+</span><span class="st"> </span>k <span class="op">+</span><span class="st"> </span>h)</a>
<a class="sourceLine" id="cb9-18" data-line-number="18">    </a>
<a class="sourceLine" id="cb9-19" data-line-number="19">    fit &lt;-<span class="st"> </span><span class="kw">dmm</span>(train.set, <span class="dt">r =</span> r, <span class="dt">h =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">    tmpMape[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, ] &lt;-<span class="st"> </span><span class="dv">100</span><span class="op">*</span><span class="kw">abs</span>(test.set <span class="op">-</span><span class="st"> </span>fit<span class="op">$</span>mean)<span class="op">/</span>test.set</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">  }</a>
<a class="sourceLine" id="cb9-22" data-line-number="22">  MAPE[r <span class="op">-</span><span class="st"> </span><span class="dv">1</span>, ] &lt;-<span class="st"> </span><span class="kw">colMeans</span>(tmpMape)</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">}</a>
<a class="sourceLine" id="cb9-24" data-line-number="24">MAPE</a></code></pre></div>
<pre><code>         1         2        3        4        5
2 4.576006  9.317405 13.75554 16.28391 19.62471
3 5.403146 10.729274 15.30481 18.93873 22.79611
4 7.479058 12.629757 17.91514 21.88697 25.22261
5 9.195199 15.659027 21.44871 26.06681 29.72018</code></pre>
<p>En la tabla previa, cada fila hace referencia a un orden de la doble media móvil desde 2 hasta 5; y cada columna hace referencia a un horizonte temporal de predicción. Con independencia del horizonte temporal de predicción considerado, el error se hace mínimo para un orden de las medias móviles de 2. Además, el error para predicciones extra-muestrales es solo aceptable a un año vista.</p>
<p>La figura 4 muestra la serie Pernoctaciones, la previsiones intra-muestrales y las previsiones extra-muestrales para el orden óptimo de 2. Observa como ahora la doble media móvil captura rápidamente los dos cambios de tendencia, aunque sigue yendo con un poco de retraso. Además, las predicciones están en consonancia con la tendencia de las últimas observaciones.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">PernoctacionesPre &lt;-<span class="st"> </span><span class="kw">dmm</span>(Pernoctaciones, <span class="dt">r =</span> <span class="dv">2</span>, <span class="dt">h =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw">autoplot</span>(Pernoctaciones, <span class="dt">series =</span> <span class="st">&quot;Pernoctaciones&quot;</span>,</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">         <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">         <span class="dt">ylab =</span> <span class="st">&quot;Noches&quot;</span>,</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">         <span class="dt">main =</span> <span class="st">&quot;Figura 4. Pernoctaciones y predicción&quot;) +</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="st">  autolayer(PernoctacionesPre$fitted, series = &quot;</span>Pred. intra<span class="st">&quot;) + </span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="st">  autolayer(PernoctacionesPre$mean, series = &quot;</span>Pred. extra<span class="st">&quot;)</span></a></code></pre></div>
<p><img src="03-10-Ejemplo4_files/figure-html/unnamed-chunk-9-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p><br />
<br />
</p>
<p><strong>Comparación con el método Ingenuo para series con estacionalidad</strong></p>
<p>Podemos ahora comparar la calidad de las previsiones extra-muestrales obtenidas con la doble media móvil de orden 2 y el método Ingenuo I.</p>
<p>A un año vista, el error de previsión con el método Ingenuo I es notablemente inferior al obtenido con la doble media móvil (3% y 4.6%, respectivamente). Sin embargo, para previsiones a dos o más años vista la doble media móvil bate al método Ingenuo I. Por ejemplo, a 5 años vista el primero tiene un error del 9.2%, mientras que el segundo tiene un error del 15%.</p>
<p>Es decir, la elección del <em>mejor</em> método dependerá del horizonte de previsión en el que estemos interesados.</p>
<p><br />
<br />
<br />
<br />
</p>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiUGVybm9jdGFjaW9uZXMgZW4gYWxvamFtaWVudG9zIHR1csOtc3RpY29zIGRlIHR1cmlzdGFzIGV4dHJhbmplcm9zIgpzdWJ0aXRsZTogIk1lZGlhcyBtw7N2aWxlcyIKYXV0aG9yOiAiSXbDoW4gQXJyaWJhcyAoRGVwdG8uIEFuw6FsaXNpcyBFY29uw7NtaWNvLiBVbml2ZXJzaXRhdCBkZSBWYWzDqG5jaWEpIgpvdXRwdXQ6IAogIGh0bWxfZG9jdW1lbnQ6CiAgICB0aGVtZTogY2VydWxlYW4KICAgIGhpZ2hsaWdodDogcHlnbWVudHMgCiAgICBmaWdfY2FwdGlvbjogZmFsc2UKICAgIGRmX3ByaW50OiBrYWJsZQogICAgdG9jOiB0cnVlCiAgICB0b2NfZGVwdGg6IDIKICAgIG51bWJlcl9zZWN0aW9uczogdHJ1ZQogICAgc2VsZl9jb250YWluZWQ6IHRydWUKICAgIGNvZGVfZG93bmxvYWQ6IHRydWUKLS0tCgpgYGB7ciBjaHVua19zZXR1cCwgZWNobyA9IEZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQod2FybmluZyA9IEZBTFNFLCAKICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBGQUxTRSwgCiAgICAgICAgICAgICAgICAgICAgICBjb21tZW50ID0gIiIsCiAgICAgICAgICAgICAgICAgICAgICBmaWcuYWxpZ24gPSAiY2VudGVyIiwgCiAgICAgICAgICAgICAgICAgICAgICBmaWcuc2hvdyA9ICJob2xkIiwKICAgICAgICAgICAgICAgICAgICAgIGZpZy5oZWlnaHQgPSA0LAogICAgICAgICAgICAgICAgICAgICAgZmlnLndpZHRoID0gOCwKICAgICAgICAgICAgICAgICAgICAgIG91dC53aWR0aCA9ICI4MCUiKSAKYGBgCgpgYGB7ciBvcHRpb25zX3NldHVwLCBlY2hvID0gRkFMU0V9Cm9wdGlvbnMoc2NpcGVuID0gOTk5KSAjLSBwYXJhIHF1aXRhciBsYSBub3RhY2lvbiBjaWVudGlmaWNhCmBgYAoKYGBge3IgbGlicmVyaWFzLCBlY2hvID0gRkFMU0V9CmxpYnJhcnkoZm9yZWNhc3QpCmxpYnJhcnkoZ2dwbG90Mik7IHRoZW1lX3NldCh0aGVtZV9idygpKQpsaWJyYXJ5KGdyaWRFeHRyYSkKbGlicmFyeShncmlkKQpgYGAKClwKXAoKIyBJbnRyb2R1Y2Npw7NuCgpDb25zaWRlcmVtb3MgZGUgbnVldm8gbGEgc2VyaWUgdGVtcG9yYWwgY29ycmVzcG9uZGllbnRlIGFsIG7Dum1lcm8gZGUgcGVybm9jdGFjaW9uZXMgcXVlIGxvcyB0dXJpc3RhcyBleHRyYW5qZXJvcyByZWFsaXphbiBlbiBFc3Bhw7FhIGVuIGFsb2phbWllbnRvcyB0dXLDrXN0aWNvcyBhdXRvcml6YWRvcyAocXVlIGxsYW1hcmVtb3MgUGVybm9jdGFjaW9uZXMgZW4gYWRlbGFudGUpLiBFc3RhIHNlcmllIGVzdMOhIGRpc3BvbmlibGUgZW4gRXVyb3N0YXQgZGVzZGUgZW5lcm8gZGUgMjAwMCBoYXN0YSBkaWNpZW1icmUgZGUgMjAxOSwgdW4gdG90YWwgZGUgMjAgYcOxb3MgeSAyNDAgb2JzZXJ2YWNpb25lcy4KCkxhIHNlcmllIHByZXNlbnRhIHRlbmRlbmNpYSBkZWNyZWNpZW50ZSBoYXN0YSBmaW5hbGVzIGRlIGxhIHByaW1lcmEgZMOpY2FkYSBkZWwgcHJlc2VudGUgc2lnbG8geSBsdWVnbyBjcmVjaWVudGUgaGFzdGEgbG9zIGRvcyDDumx0aW1vcyBhw7Fvcy4gTGEgZXN0YWNpb25hbGlkYWQgZGUgb3JkZW4gMTIgZXN0YSBkZXRlcm1pbmFkYSBwb3IgbGFzIHZhY2FjaW9uZXMgZGUgdmVyYW5vLiBFbCBlc3F1ZW1hIGVzIG11bHRpcGxpY2F0aXZvLgoKYGBge3J9ClBlcm5vY3RhY2lvbmVzIDwtIHJlYWQuY3N2MigiLi9zZXJpZXMvUGVybm9jdGFjaW9uZXMuY3N2IiwgaGVhZGVyID0gVFJVRSkKUGVybm9jdGFjaW9uZXMgPC0gdHMoUGVybm9jdGFjaW9uZXNbLDJdLCBzdGFydCA9IDIwMDAsIGZyZXF1ZW5jeSA9IDEyKQpgYGAKCmBgYHtyfQphdXRvcGxvdChQZXJub2N0YWNpb25lcy8xMDAwMDAwLAogICAgICAgICB4bGFiID0gIiIsCiAgICAgICAgIHlsYWIgPSAiTm9jaGVzIChtaWxsb25lcykiLAogICAgICAgICBtYWluID0gIkZpZ3VyYSAxLiBQZXJub2N0YWNpb25lcyAoZGF0b3MgbWVuc3VhbGVzKSIpICsKICBzY2FsZV94X2NvbnRpbnVvdXMoYnJlYWtzPSBzZXEoMjAwMCwgMjAyMCwgMikpICAKYGBgCgpcClwKCiMgUHJlZGljY2nDs24gcG9yIGVsIG3DqXRvZG8gZGUgbGFzIG1lZGlhcyBtw7N2aWxlcwoKVmFtb3MgYWp1c3RhciB5IHByZWRlY2lyIGxhIHNlcmllIGRlIHBlcm5vY3RhY2lvbmVzIHBvciBlbCBtw6l0b2RvIGRlIGxhcyBtZWRpYXMgbcOzdmlsZXMuIENvbW8gZXN0ZSBtw6l0b2RvIGFzdW1lIHF1ZSBsYSBzZXJpZSBubyB0aWVuZSBlc3RhY2lvbmFsaWRhZCwgdmFtb3MgYSB0cmFiYWphciBjb24gbGEgc2VyaWUgYW51YWxpemFkYSBkZSBwZXJub2N0YWNpb25lcywgZG9uZGUgY2FkYSBkYXRvIHNlcsOhIGVsIG7Dum1lcm8gZGUgcGVybm9jdGFjaW9uZXMgYW51YWxlcy4KCmBgYHtyfQpQZXJub2N0YWNpb25lcyA8LSBhZ2dyZWdhdGUoUGVybm9jdGFjaW9uZXMsIEZVTiA9IHN1bSkKYGBgCgoKYGBge3J9CmF1dG9wbG90KFBlcm5vY3RhY2lvbmVzLzEwMDAwMDAsCiAgICAgICAgIHhsYWIgPSAiIiwKICAgICAgICAgeWxhYiA9ICJOb2NoZXMgKG1pbGxvbmVzKSIsCiAgICAgICAgIG1haW4gPSAiRmlndXJhIDIuIFBlcm5vY3RhY2lvbmVzIChkYXRvcyBhbnVhbGVzKSIpICsKICBzY2FsZV94X2NvbnRpbnVvdXMoYnJlYWtzPSBzZXEoMjAwMCwgMjAyMCwgMikpICAKYGBgCgpEYWRvIHF1ZSBsYSBzZXJpZSB0aWVuZSB0ZW5kZW5jaWEsIHVzYXJlbW9zIGxhcyBkb2JsZXMgbWVkaWFzIG3Ds3ZpbGVzIHBhcmEgZXN0aW1hciBlbCBuaXZlbCB5IGxhIHBlbmRpZW50ZSwgeSBhIHBhcnRpciBkZSBlbGxhcyBvYnRlbmVyIGxhIHNlcmllIGFqdXN0YWRhIHkgbGFzIHByZWRpY2Npb25lcy4KCmBSYCBubyBub3MgcHJvcG9yY2lvbmEgdW5hIGZ1bmNpw7NuIGVzcGVjw61maWNhIHBhcmEgYXBsaWNhciBlbCBtw6l0b2RvIGRlIGxhcyBkb2JsZXMgbWVkaWFzIG3Ds3ZpbGVzLCBhc8OtIHVzYXJlbW9zIG51ZXN0cmEgZnVuY2nDs24gYGRtbWAuCgpgYGB7cn0KZG1tIDwtIGZ1bmN0aW9uKHgsIHIgPSAzLCBoID0gNSkgewogIHogPC0gTlVMTAogIHokeCA8LSB4CiAgeiRvcmRlbiA9IHIKICAKICBUVCA8LSBsZW5ndGgoeCkKICBpbmljaW8gPC0gc3RhcnQoeCkKICBmcmVjdWVuY2lhIDwtZnJlcXVlbmN5KHgpCiAgCiAgeiRtbTEgPC0gc3RhdHM6OmZpbHRlcih4LCByZXAoMS9yLCByKSwgc2lkZSA9IDEpCiAgeiRtbTIgPC0gc3RhdHM6OmZpbHRlcih6JG1tMSwgcmVwKDEvciwgciksIHNpZGUgPSAxKQogIAogIHokbCA8LSAyICogeiRtbTEgLSB6JG1tMgogIHokYiA8LSAyICogKHokbW0xIC0geiRtbTIpIC8gKHIgLSAxKQogIAogIHokZml0dGVkIDwtIHRzKGMoTkEsIHokbFstVFRdICsgeiRiWy1UVF0pLCBzdGFydCA9IGluaWNpbywgZnJlcSA9IGZyZWN1ZW5jaWEpCiAgeiRtZWFuIDwtIHRzKHokbFtUVF0gKyAoMTpoKSAqIHokYltUVF0sIHN0YXJ0ID0gdGltZSh4KVtUVF0gKyAxL2ZyZWN1ZW5jaWEsIGZyZXEgPSBmcmVjdWVuY2lhKQogIHokcmVzaWR1YWxzIDwtIHggLSB6JGZpdHRlZAogIGNsYXNzKHopIDwtICJmb3JlY2FzdCIKICB6Cn0KYGBgCgpWZWFtb3MgcHJpbWVybyBsb3MgcmVzdWx0YWRvcyBhc3VtaWVuZG8gdW4gb3JkZW4gZGUgbGEgbWVkaWEgbcOzdmlsIGRlIDQgYcOxb3MgKCRyID0gNCQpIHkgcmVhbGl6YW5kbyB1bmEgcHJlZGljY2nDs24gcGFyYSBsb3MgcHLDs3hpbW9zIDUgYcOxb3MgKGBoID0gNWApLiBMYSBmaWd1cmEgMyBtdWVzdHJhIGxhIHNlcmllIFBlcm5vY3RhY2lvbmVzLCBsYSBzZXJpZSBhanVzdGFkYSB5IGxhIHByZWRpY2Npw7NuLgoKYGBge3J9ClBlcm5vY3RhY2lvbmVzUHJlIDwtIGRtbShQZXJub2N0YWNpb25lcywgciA9IDQsIGggPSA1KQphdXRvcGxvdChQZXJub2N0YWNpb25lcywgc2VyaWVzID0gIlBlcm5vY3RhY2lvbmVzIiwKICAgICAgICAgeGxhYiA9ICIiLAogICAgICAgICB5bGFiID0gIk5vY2hlcyIsCiAgICAgICAgIG1haW4gPSAiRmlndXJhIDMuIFBlcm5vY3RhY2lvbmVzIHkgcHJlZGljY2nDs24iKSArCiAgYXV0b2xheWVyKFBlcm5vY3RhY2lvbmVzUHJlJGZpdHRlZCwgc2VyaWVzID0gIlByZWQuIGludHJhIikgKyAKICBhdXRvbGF5ZXIoUGVybm9jdGFjaW9uZXNQcmUkbWVhbiwgc2VyaWVzID0gIlByZWQuIGV4dHJhIikKYGBgCgpVbiBkZXNhc3RyZS4gRWwgb3JkZW4gZXMgbXV5IGVsZXZhZG8gYXPDrSBxdWUgcGVyZGVtb3MgNyBvYnNlcnZhY2lvbmVzIGFsIGluaWNpbywgbGUgY3Vlc3RhIGNhcHR1cmFyIGVsIHByaW1lciBjYW1iaW8gZGUgdGVuZGVuY2lhIC0tZW4gbGEgc2VyaWUgb3JpZ2luYWwgdGllbmUgbHVnYXIgZW4gMjAxMCB5IGVuIGxhIHNlcmllIGVzdGltYWRhIGVuIDIwMTMtLSB5IGxhcyBwcmVkaWNjaW9uZXMgbm8gdGllbmVuIGVuIGN1ZW50YSBlbCBkZXNjZW5zbyBlbiBsYXMgcGVybm9jdGFjaW9uZXMgb2N1cnJpZG8gZW4gbG9zIGRvcyDDumx0aW1vcyBhw7Fvcy4KCmBgYHtyfQphY2N1cmFjeShQZXJub2N0YWNpb25lc1ByZSkKYGBgCgpBc8OtLCBubyBzb3JwcmVuZGVuIGxvcyB2YWxvcmVzIGRlIGxvcyBjcml0ZXJpb3MgZGUgYm9uZGFkIGRlIGFqdXN0ZTogdW4gZXJyb3IgbWVkaW8gbXV5IGVsZXZhZG8sIGluZGljYXRpdm8gZGUgc2VzZ28gZW4gbGFzIHByZWRpY2Npb25lczsgdW4gZXJyb3IgcG9yY2VudHVhbCBkZSA3LjIlLCBhbGdvIGVsZXZhZG87IHkgdW4gZXJyb3IgbWVkaW8gKFJNU0UpIGRlIGNhc2kgNS41IG1pbGxvbmVzIGRlIHBlcm5vY3RhY2lvbmVzLiBFc3RvcyBlcnJvcmVzIHNvbiBzdXBlcmlvcmVzIGEgbG9zIG9idGVuaWRvcyBjb24gZWwgbcOpdG9kbyBJbmdlbnVvIEkgKFJNU0UgPSAzLjggbWlsbG9uZXMgZGUgcGVybm9jdGFjaW9uZXM7IE1BUEUgPSA0LjQlKS4KClwKXAoKIyBTZWxlY2Npw7NuIGRlbCBvcmRlbiB5IHByZWRpY2Npw7NuIHVzYW5kbyBvcmlnZW4gZGUgcHJlZGljY2nDs24gbcOzdmlsCgpWYW1vcyBhIG1lam9yYXIgbnVlc3RyYSBwcmltZXJhIGFwcm94aW1hY2nDs24gdXNhbmRvIGVsIG3DqXRvZG8gZGVsIG9yaWdlbiBkZSBwcmVkaWNjacOzbiBtw7N2aWwgcGFyYSBpZGVudGlmaWNhciBlbCBvcmRlbiDDs3B0aW1vIGRlIGxhIGRvYmxlIG1lZGlhIG3Ds3ZpbCBzZWfDum4gcXVlIGxhIHByZWRpY2Npw7NuIHNlYSBkZSAxIGEgNSBhw7Fvcy4gCgpDb25zaWRlcmFyZW1vcyDDs3JkZW5lcyBkZXNkZSAyIGhhc3RhIDUsIHkgYXN1bWlyZW1vcyBxdWUgZWwgbcOtbmltbyBuw7ptZXJvIGRlIGHDsW9zIHBhcmEgaGFjZXIgbGFzIGVzdGltYWNpb25lcyBlcyBkZSAxMAoKYGBge3J9CmsgPC0gMTAgICAgICAgICAgICAgICAgICAgI01pbmltbyBudW1lcm8gZGUgZGF0b3MgcGFyYSBlc3RpbWFyCmggPC0gNSAgICAgICAgICAgICAgICAgICAgI0hvcml6b250ZSBkZSBsYXMgcHJlZGljaWNpb25lcwpUVCA8LSBsZW5ndGgoUGVybm9jdGFjaW9uZXMpICNMb25naXR1ZCBzZXJpZQpzIDwtIFRUIC0gayAtIGggICAgICAgICAgICNUb3RhbCBkZSBlc3RpbWFjaW9uZXMKCk1BUEUgPC0gbWF0cml4KE5BLCBucm93ID0gNCwgbmNvbCA9IDUpCnJvd25hbWVzKE1BUEUpIDwtIDI6NQpjb2xuYW1lcyhNQVBFKSA8LSAxOmgKCmZvciAociBpbiAyOjUpIHsKCiAgdG1wTWFwZSA8LSBtYXRyaXgoTkEsIHMgKyAxLCBoKQogIAogIGZvciAoaSBpbiAwOnMpIHsKICAKICAgIHRyYWluLnNldCA8LSBzdWJzZXQoUGVybm9jdGFjaW9uZXMsIHN0YXJ0ID0gaSArIDEsIGVuZCA9IGkgKyBrKQogICAgdGVzdC5zZXQgPC0gIHN1YnNldChQZXJub2N0YWNpb25lcywgc3RhcnQgPSBpICsgayArIDEsIGVuZCA9IGkgKyBrICsgaCkKICAgIAogICAgZml0IDwtIGRtbSh0cmFpbi5zZXQsIHIgPSByLCBoID0gNSkKICAgIHRtcE1hcGVbaSArIDEsIF0gPC0gMTAwKmFicyh0ZXN0LnNldCAtIGZpdCRtZWFuKS90ZXN0LnNldAogIH0KICBNQVBFW3IgLSAxLCBdIDwtIGNvbE1lYW5zKHRtcE1hcGUpCn0KTUFQRQpgYGAKCkVuIGxhIHRhYmxhIHByZXZpYSwgY2FkYSBmaWxhIGhhY2UgcmVmZXJlbmNpYSBhIHVuIG9yZGVuIGRlIGxhIGRvYmxlIG1lZGlhIG3Ds3ZpbCBkZXNkZSAyIGhhc3RhIDU7IHkgY2FkYSBjb2x1bW5hIGhhY2UgcmVmZXJlbmNpYSBhIHVuIGhvcml6b250ZSB0ZW1wb3JhbCBkZSBwcmVkaWNjacOzbi4gQ29uIGluZGVwZW5kZW5jaWEgZGVsIGhvcml6b250ZSB0ZW1wb3JhbCBkZSBwcmVkaWNjacOzbiBjb25zaWRlcmFkbywgZWwgZXJyb3Igc2UgaGFjZSBtw61uaW1vIHBhcmEgdW4gb3JkZW4gZGUgbGFzIG1lZGlhcyBtw7N2aWxlcyBkZSAyLiBBZGVtw6FzLCBlbCBlcnJvciBwYXJhIHByZWRpY2Npb25lcyBleHRyYS1tdWVzdHJhbGVzIGVzIHNvbG8gYWNlcHRhYmxlIGEgdW4gYcOxbyB2aXN0YS4KCkxhIGZpZ3VyYSA0IG11ZXN0cmEgbGEgc2VyaWUgUGVybm9jdGFjaW9uZXMsIGxhIHByZXZpc2lvbmVzIGludHJhLW11ZXN0cmFsZXMgeSBsYXMgcHJldmlzaW9uZXMgZXh0cmEtbXVlc3RyYWxlcyBwYXJhIGVsIG9yZGVuIMOzcHRpbW8gZGUgMi4gT2JzZXJ2YSBjb21vIGFob3JhIGxhIGRvYmxlIG1lZGlhIG3Ds3ZpbCBjYXB0dXJhIHLDoXBpZGFtZW50ZSBsb3MgZG9zIGNhbWJpb3MgZGUgdGVuZGVuY2lhLCBhdW5xdWUgc2lndWUgeWVuZG8gY29uIHVuIHBvY28gZGUgcmV0cmFzby4gQWRlbcOhcywgbGFzIHByZWRpY2Npb25lcyBlc3TDoW4gZW4gY29uc29uYW5jaWEgY29uIGxhIHRlbmRlbmNpYSBkZSBsYXMgw7psdGltYXMgb2JzZXJ2YWNpb25lcy4KCmBgYHtyfQpQZXJub2N0YWNpb25lc1ByZSA8LSBkbW0oUGVybm9jdGFjaW9uZXMsIHIgPSAyLCBoID0gNSkKYXV0b3Bsb3QoUGVybm9jdGFjaW9uZXMsIHNlcmllcyA9ICJQZXJub2N0YWNpb25lcyIsCiAgICAgICAgIHhsYWIgPSAiIiwKICAgICAgICAgeWxhYiA9ICJOb2NoZXMiLAogICAgICAgICBtYWluID0gIkZpZ3VyYSA0LiBQZXJub2N0YWNpb25lcyB5IHByZWRpY2Npw7NuIikgKwogIGF1dG9sYXllcihQZXJub2N0YWNpb25lc1ByZSRmaXR0ZWQsIHNlcmllcyA9ICJQcmVkLiBpbnRyYSIpICsgCiAgYXV0b2xheWVyKFBlcm5vY3RhY2lvbmVzUHJlJG1lYW4sIHNlcmllcyA9ICJQcmVkLiBleHRyYSIpCmBgYAoKXApcCgoqKkNvbXBhcmFjacOzbiBjb24gZWwgbcOpdG9kbyBJbmdlbnVvIHBhcmEgc2VyaWVzIGNvbiBlc3RhY2lvbmFsaWRhZCoqCgpQb2RlbW9zIGFob3JhIGNvbXBhcmFyIGxhIGNhbGlkYWQgZGUgbGFzIHByZXZpc2lvbmVzIGV4dHJhLW11ZXN0cmFsZXMgb2J0ZW5pZGFzIGNvbiBsYSBkb2JsZSBtZWRpYSBtw7N2aWwgZGUgb3JkZW4gMiB5IGVsIG3DqXRvZG8gSW5nZW51byBJLgoKQSB1biBhw7FvIHZpc3RhLCBlbCBlcnJvciBkZSBwcmV2aXNpw7NuIGNvbiBlbCBtw6l0b2RvIEluZ2VudW8gSSBlcyBub3RhYmxlbWVudGUgaW5mZXJpb3IgYWwgb2J0ZW5pZG8gY29uIGxhIGRvYmxlIG1lZGlhIG3Ds3ZpbCAoMyUgeSA0LjYlLCByZXNwZWN0aXZhbWVudGUpLiBTaW4gZW1iYXJnbywgcGFyYSBwcmV2aXNpb25lcyBhIGRvcyBvIG3DoXMgYcOxb3MgdmlzdGEgbGEgZG9ibGUgbWVkaWEgbcOzdmlsIGJhdGUgYWwgbcOpdG9kbyBJbmdlbnVvIEkuIFBvciBlamVtcGxvLCBhIDUgYcOxb3MgdmlzdGEgZWwgcHJpbWVybyB0aWVuZSB1biBlcnJvciBkZWwgOS4yJSwgbWllbnRyYXMgcXVlIGVsIHNlZ3VuZG8gdGllbmUgdW4gZXJyb3IgZGVsIDE1JS4KCkVzIGRlY2lyLCBsYSBlbGVjY2nDs24gZGVsIF9tZWpvcl8gbcOpdG9kbyBkZXBlbmRlcsOhIGRlbCBob3Jpem9udGUgZGUgcHJldmlzacOzbiBlbiBlbCBxdWUgZXN0ZW1vcyBpbnRlcmVzYWRvcy4KCgpcClwKXApcCgo=</div>
<footer class="footer">
  
<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
<br>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.  <div class="text-muted">Website created by Iv&aacute;n Arribas. &copy;  2020. If you find any bugs please report them to <a href="mailto:ivan.arribas@uv.es"> ivan.arribas@uv.es</a>.</div>
  
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("03-10-Ejemplo4.Rmd");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
